!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(){}var e=a("when");d.prototype={parse:function(a){var b=e.defer(),c=new Blob([a],{type:"image/jpeg"}),d=URL.createObjectURL(c),f=new Image;return f.onload=function(){URL.revokeObjectURL(d),b.resolve(f)},f.onerror=function(){URL.revokeObjectURL(d),b.reject()},f.src=d,b.promise}},b.exports=d},{when:62}],2:[function(a,b,c){function d(a){var b=a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT),c=a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT);return c.precision>0&&b.precision>0}function e(a){this.hasHighp=d(a),this.programs=[this.frame1=new f(a),this.frame2=new f(a),this.frame3=new f(a)],g.on(this,"compile")}var f=a("nanogl/program"),g=a("gl/quality");f.debug=!0,e.prototype={precision:function(){return this.hasHighp?"highp":"mediump"},compile:function(){var a="\n";a+="precision "+this.precision()+" float;\n",a+=g.getMacroDefs()+"\n",this.frame1.compile("#define GLSLIFY 1\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\n\nvarying vec2 vTexCoord;\n\nuniform mat4 uMVP;\n\nvoid main(){\n\n  gl_Position = uMVP * vec4( aPosition, 1.0 );\n\n  vTexCoord = aTexCoord;\n  \n}","\nprecision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D uTex;\nuniform sampler2D uTexDog;\nuniform float uTime;\nuniform float uRotate1;\nuniform vec2 uScale1;\nuniform vec2 uScale2;\nuniform float uVolume;\n\nvarying vec2 vTexCoord;\n\n#define PI 3.14159265359\n#define TWO_PI 6.28318530718\n#define SPEED 1.5\n\nmat2 rotate2d(float _angle){\n    return mat2(cos(_angle),-sin(_angle),\n                sin(_angle),cos(_angle));\n}\nfloat square(vec2 st, float size, float deltaTime, float speedCoef){\n  float d = 0.0;\n  int N = 4;\n  float a = atan(st.x,st.y)+PI;\n  float r = TWO_PI/float(N);\n  a+=uTime*SPEED*0.5*speedCoef+deltaTime;\n  d = cos(floor(.5+a/r)*r-a)*length(st);\n  d = min(1.0,d);\n  d = smoothstep(size-0.001,size,d);\n  return d;\n}\n\nvoid main(){\n\n  float t = uTime;\n  vec2 st = vTexCoord;\n  vec3 color;\n  float color_val;\n\n  st -= vec2(0.5);\n  st *= uScale1;\n  st = rotate2d( uRotate1 ) * st;\n  st *= uScale2;\n  st += vec2(0.5);\n  float dog = texture2D( uTexDog, st*2.0-vec2(0.5)).r;\n  \n\n  float d = 0.0;\n  float inv_d = 1.0;\n  float plus_d = 1.0;\n  float r = 1.991;\n  // r = 2.0991;\n  float z=0.0;\n  st = vTexCoord;\n  float size;\n  float size2;\n\n  // size = ((cos(-uTime*SPEED)*cos(-uTime*SPEED)))*0.14+0.86;\n  size = ((cos(-uTime*SPEED)*cos(-uTime*SPEED)))*0.14+0.86;\n  float size3 = 0.8;\n  size2 = 1.0-((cos(-uTime*SPEED)*cos(-uTime*SPEED)))*1.0;\n  size2 *= 0.872;\n  st = st *7.-3.5;\n  st.y-=r*1.0;\n  st.x-=r*2.0;\n  d = 1.0;\n  for(int x=0;x<3;x++){\n    st.x+=r*1.0;\n    d *= square(st, size,z,1.0);\n    for(int y=0;y<2;y++){\n      st.y+=r*1.0;\n      d *= square(st, size,z,1.0);\n    }\n    st.y-=r*2.0;\n  }\n\n  st = vTexCoord;\n  st = st *7.-3.5;\n  st.y-=r*1.0;\n  st.x-=r*2.0;\n  st.x+=r*0.5;\n  st.y+=r*0.5;\n  z=0.0;\n  for(int x=0;x<2;x++){\n    st.x+=r;\n    inv_d *= square(st, size2,z,1.0);\n    plus_d *= square(st, size3,z,1.0);\n    for(int y=0;y<1;y++){\n      st.y+=r;\n      inv_d *= square(st, size2,z,1.0);\n      plus_d *= square(st, size3,z,1.0);\n      // z+=0.1;\n    }\n    st.y-=r*1.0;\n  }\n  /*\n\n  */\n  // d=inv_d;\n  d=d+(plus_d-1.0);\n  d = clamp(d, 0.0,1.0);\n  d=(d+(1.0-inv_d));\n  d = clamp(d, 0.0,1.0);\n\n  // color_val = d;\n  color_val = (1.0-d)*dog + (1.0-dog)*d;\n  color= mix(vec3(1.0,0.92,0.2), vec3(0.97,0.97,0.97), color_val);\n\n  gl_FragColor = vec4( color, 1.0 );\n\n}",a),this.frame2.compile("#define GLSLIFY 1\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\n\nvarying vec2 vTexCoord;\n\nuniform mat4 uMVP;\n\nvoid main(){\n\n  gl_Position = uMVP * vec4( aPosition, 1.0 );\n\n  vTexCoord = aTexCoord;\n  \n}","\nprecision mediump float;\n#define GLSLIFY 1\n\n// uniform sampler2D uTexDisplace;\nuniform sampler2D uTexDog;\nuniform float uTime;\nuniform float uRotate1;\nuniform vec2 uScale1;\nuniform vec2 uScale2;\nuniform float uVolume;\n\nvarying vec2 vTexCoord;\n\nmat2 rotate2d(float _angle){\n    return mat2(cos(_angle),-sin(_angle),\n                sin(_angle),cos(_angle));\n}\nvoid main(){\n  \n  vec2 st = vTexCoord;\n  st -= vec2(0.5);\n  st *= uScale1;\n  st = rotate2d( uRotate1 ) * st;\n  st *= uScale2;\n  st += vec2(0.5);\n  float dog = texture2D( uTexDog, st*2.0-vec2(0.5)).r;\n  //\n  vec3 color;\n  // vec3 colorDisplace = texture2D( uTexDisplace, vTexCoord*0.3+vec2(0.12*uTime,0.12*uTime) ).rgb;\n  // vec2 uvDisplace = vec2(colorDisplace.r-0.5,colorDisplace.g-0.5)*vec2(0.315);\n  float speed = 2.0;\n  float t = uTime*speed;\n  vec2 uvDisplace = vTexCoord.xy + vec2(cos(t + vTexCoord.y * 5.0) * 0.2, sin(t + vTexCoord.x * 5.0) * 0.2);\n  //\n  vec2 coord = vTexCoord*50.0+uvDisplace*25.0 + vec2(3.0);\n  vec2 center = vec2(0.5);\n  float dist = length(center - coord);\n  float circlesIn = cos(dist/1.085 - uTime*5.0);\n  circlesIn = (clamp(circlesIn,0.9,1.0)-0.9)*10.0;\n  circlesIn = clamp(circlesIn*2.0,0.0,1.0);\n  float c = 1.0-circlesIn;\n\n  coord = vec2(-vTexCoord.x,vTexCoord.y)*50.0+uvDisplace*25.0 + vec2(53.0);\n  dist = length(center - coord);\n  float circlesIn2 = cos(dist/1.085 - uTime*5.0);\n  circlesIn2 = (clamp(circlesIn2,0.93,1.0)-0.93)*10.0;\n  circlesIn2 = clamp(circlesIn2*2.0,0.0,1.0);\n  float c2 = 1.0-circlesIn2;\n  \n  //\n  \n  // c = (1.0-c2)*dog + (1.0-dog)*c;\n  c = (c2)*dog + (1.0-dog)*c;\n  //c+=dog;\n  c = clamp(c,0.0,1.0);\n  color= mix(vec3(0.97,0.06,0.3), vec3(0.97,0.97,0.97), c);\n  gl_FragColor = vec4( color, 1.0 );\n\n  \n}",a),this.frame3.compile("#define GLSLIFY 1\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\n\nvarying vec2 vTexCoord;\n\nuniform mat4 uMVP;\n\nvoid main(){\n\n  gl_Position = uMVP * vec4( aPosition, 1.0 );\n\n  vTexCoord = aTexCoord;\n  \n}","\nprecision mediump float;\n#define GLSLIFY 1\n\n// uniform sampler2D uTex;\n//uniform sampler2D uTexDisplace;\nuniform sampler2D uTexDog;\nuniform sampler2D uTexBorder;\nuniform float uTime;\nuniform float uRotate1;\nuniform vec2 uScale1;\nuniform vec2 uScale2;\n\nvarying vec2 vTexCoord;\n\n#define PI 3.14159265359\n#define TWO_PI 6.28318530718\n\nmat2 rotate2d(float _angle){\n    return mat2(cos(_angle),-sin(_angle),\n                sin(_angle),cos(_angle));\n}\nvoid main(){\n\n  float speed = 2.0;\n  float t = uTime*speed;\n  // vec3 colorDisplace = texture2D( uTexDisplace, vTexCoord*0.3 +vec2(0.12*uTime,0.12*uTime)).rgb;\n  // vec2 uvDisplace = vec2(colorDisplace.r,colorDisplace.g)*vec2(0.20);\n  vec2 uvDisplace = vTexCoord.xy + vec2(cos(t + vTexCoord.y * 5.0) * 0.2, sin(t + vTexCoord.x * 5.0) * 0.2);\n  //\n  vec2 uvDisplaceEdge = vTexCoord.xy*1.2 + vec2(sin(t + vTexCoord.y * 5.0), cos(t + vTexCoord.x * 5.0)) * 0.05 - 0.05;\n\n  vec3 color;\n  vec3 colorEdge = texture2D( uTexBorder, uvDisplaceEdge ).rgb;\n/*\n  \n  // color.r = mod(vTexCoord.x, 0.25) * mod(vTexCoord.y, 0.25);\n  // color.r = fract(vTexCoord.x*25.0);\n\n  vec2 texCoor = vTexCoord;\n  texCoor -= vec2(0.5);\n  texCoor = rotate2d( uTime*0.21 ) * texCoor;\n  texCoor += vec2(0.5);\n  //\n  vec2 texCoor3 = vTexCoord;\n  texCoor3 -= vec2(0.5);\n  texCoor3 = rotate2d( uTime*0.21 ) * texCoor;\n  texCoor3 += vec2(0.5);\n  //\n  float color1 = texture2D( uTex, texCoor*1.2*1.4-vec2(0.1)+uvDisplace*1.0-vec2(0.12*uTime,0.12*uTime) ).r;\n  // float color2 = texture2D( uTex, texCoor*1.2-vec2(0.1)-uvDisplace*1.0 ).r;\n  float color3 = texture2D( uTex, texCoor*1.2*1.4-uvDisplace*0.5 ).r;\n  float color2 = texture2D( uTex, texCoor3*1.2*1.4-uvDisplace*0.5 ).r;\n\n  color2 += color3;\n\n  color2*=colorEdge.r;\n  color2+=colorEdge.b;\n*/\n  //\n  //\n  //\n  vec2 st = vTexCoord;\n  st -= vec2(0.5);\n  // rotate the space\n  st *= uScale1;\n  st = rotate2d( uRotate1 ) * st;\n  st *= uScale2;\n  st += vec2(0.5);\n  float dog = texture2D( uTexDog, st*2.0-vec2(0.5)).r;\n  // dog *= 1000.0;\n  // dog = clamp(dog,99.0,100.0);\n  // dog -= 99.0;\n  //\n  //\n  //\n  /*\n  float color_val = (0.0+color1)*dog + (1.0-dog)*color2;\n  color= mix(vec3(0.1,0.03,0.48), vec3(0.97,0.97,0.97), 1.0-color_val);\n  gl_FragColor = vec4( color, 1.0 );\n  */\n\n/*\n  float _x1,_y1;\n  float _x,_y;\n  float _a=0.5;\n  _x1=vTexCoord.x;\n  _y1=vTexCoord.y;\n  _x = cos(_a);\n  float x,y;\n  float w1,w2,w3;\n  x=fract(_x*2.0);\n  y=fract(_y*2.0-uTime*0.2);\n  if(x > 0.5) {\n    w1 = 1.0;\n  } else {\n    w1 = 0.0;\n  }\n  if(y > 0.5) {\n    w2 = 1.0;\n  } else {\n    w2 = 0.0;\n  }\n  w3 = (1.0-w1)*(1.0-w2) + w1*w2;\n  w3 = w2;\n  color = mix(vec3(0.97,0.97,0.97), vec3(1.0,0.92,0.2), w3);\n  if(x > 0.9 || y > 0.9) {\n      gl_FragColor = vec4(1,1,1,1);\n  } else {\n      gl_FragColor = vec4(0,0,0,0);\n  }\n*/\n/*\n\n\n  */\n\n  // color = colorDisplace;\n  // color = vec3(coefDisplace);\n  // color = colorDisplace*coefDisplace;\n  \n\n/*\n\n    // vec2 coord = vTexCoord*50.0+uvDisplace*20.0 + vec2(3.0);\n    vec2 coord = vTexCoord*50.0+uvDisplace*20.0 + vec2(3.0);\n    vec2 center = vec2(0.5);\n    float dist = length(center - coord);\n    float circlesIn = cos(dist/1.0 - uTime*4.0);\n    circlesIn *= 5.0;\n    circlesIn = clamp(circlesIn,0.0,0.1)*10.0;\n    float edge = clamp(dist-40.0,0.0,1.0);\n    //circlesIn *= 1.0-edge;\n    // float c = circlesOut + circlesIn;\n    float c = circlesIn;\n    c = (1.0-c)*dog + (1.0-dog)*c;\n    //c= dist;\n    color= mix(vec3(0.97,0.06,0.3), vec3(0.97,0.97,0.97), c);\n    gl_FragColor = vec4( color, 1.0 );\n    // gl_FragColor = vec4( vec3(edge), 1.0 );\n*/\n\n  float c;\n  vec2 coord;\n\n/*\n  vec2 coord = vTexCoord;\n  coord -= vec2(0.5);\n  coord = rotate2d( uTime*0.21 ) * coord;\n  coord += vec2(0.5);\n  coord *= 50.0;\n  coord += uvDisplace*35.0;\n\n  float center = 0.5;\n  float dist = length(center - coord.x);\n  float circlesIn = cos(dist/3.2 - uTime*0.0);\n  circlesIn *= 1.0;\n  circlesIn = (clamp(circlesIn,0.997,1.0)-0.997)*550.0;\n  float c = circlesIn;\n  // float c = 1.0-circlesIn;\n  \n\n\n\n  vec2 coord2 = vTexCoord;\n  coord2 -= vec2(0.5);\n  coord2 = rotate2d( uTime*0.21*(1.0) ) * coord2;\n  coord2 += vec2(0.5);\n  coord2 *= 50.0;\n  coord2 += uvDisplace*35.0;\n\n  dist = length(center - coord2.y);\n  float circlesIn2 = cos(dist/3.2 - uTime*3.0 + dog*2.0) ;\n  circlesIn2 *= 1.0;\n  circlesIn2 = (clamp(circlesIn2,0.997,1.0)-0.997)*550.0;\n  c += circlesIn2;\n  \n  c = clamp(c, 0.,1.0 );\n  \n  c*=colorEdge.r;\n  c+=colorEdge.b;\n  c = 1.0-c;\n\n  //c = (1.0-c)*dog + (1.0-dog)*c;\n\n  color= mix(vec3(0.1,0.03,0.48), vec3(0.97,0.97,0.97), c);\n\n*/\n  \n  vec2 coord2 = vTexCoord+uvDisplace*2.0+vec2(0.0+uTime*0.03,0.0) - vec2(0.5);\n  // coord2 = rotate2d( uTime*0.1 + PI*0.5*dog) * coord2;\n  coord2 = rotate2d( uTime*0.1 + PI*0.5) * coord2 + vec2(0.5);\n  float x2 = cos(coord2.x*6.0);\n  x2 = (clamp(x2,0.997,1.0)-0.997)*550.0;\n\n  \n  vec2 coord3 = vTexCoord+uvDisplace*2.0+vec2(0.15+uTime*0.03,0.0) - vec2(0.5);\n  // coord3 = rotate2d( -uTime*0.1 + PI*0.5 + PI*0.5*dog) * coord3;\n  coord3 = rotate2d( -uTime*0.1 + PI*0.5 + PI*0.5) * coord3 + vec2(0.5);\n  float x3 = cos(coord3.x*6.0);\n  x3 = (clamp(x3,0.997,1.0)-0.997)*550.0;\n\n  vec2 coord2b = vTexCoord+uvDisplace*2.0+vec2(0.0+uTime*0.03,0.0) - vec2(0.5);\n  coord2b = rotate2d( uTime*0.1 - PI*0.0) * coord2b + vec2(0.5);\n  float x2b = cos(coord2b.x*6.0);\n  x2b = (clamp(x2b,0.997,1.0)-0.997)*550.0;\n\n  \n  vec2 coord3b = vTexCoord+uvDisplace*2.0+vec2(0.15+uTime*0.03,0.0) - vec2(0.5);\n  coord3b = rotate2d( -uTime*0.1 + PI*0.0 - PI*0.5) * coord3b + vec2(0.5);\n  float x3b = cos(coord3b.x*6.0);\n  x3b = (clamp(x3b,0.997,1.0)-0.997)*550.0;\n\n  c = x3+x2;\n  float cb = x3b+x2b;\n  c = clamp(c,0.0,1.0);\n  cb = clamp(cb,0.0,1.0);\n  //c = (1.0-c)*dog + (1.0-dog)*cb;\n  c *= 1.0-dog;\n  c += cb*dog;\n  c*=colorEdge.r;\n  c+=colorEdge.b;\n  c = 1.0-c;\n\n  c = clamp(c,0.0,1.0);\n\n  //c = (1.0-c)*dog + (1.0-dog)*c;\n\n  color= mix(vec3(0.1,0.03,0.48), vec3(0.97,0.97,0.97), c);\n  // color= vec3(c);\n \n  // color.rg=uvDisplace;\n\n  \n\n  //color= mix(vec3(0.97,0.06,0.3), vec3(0.97,0.97,0.97), c);\n  gl_FragColor = vec4( color, 1.0 );\n  \n}",a),this.process()},process:function(){for(var a=0;a<this.programs.length;a++)this.programs[a].use()}},b.exports=e},{"gl/quality":10,"nanogl/program":38}],3:[function(a,b,c){function d(a){this.gl=a,this._lib={},this._list=[],this.bbc=!0,this.maxCubeSize=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),this.extAniso=a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||a.getExtension("EXT_texture_filter_anisotropic"),this.maxAniso=this.extAniso?a.getParameter(this.extAniso.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,this.JPGParser=new j(a),this.texDefs=[]}function e(a,b,c,d,e,f,g,h,i){this.tex=b,this.url=c,this.bbc=h,this.mipmap=e,this.smooth=d,this.aniso=g,this.miplinear=f,this.loader=a,this.clamp=i,this.lodLevel=0}function f(a){return a.bind(),a.gl.generateMipmap(a.gl.TEXTURE_2D),a}var g=a("nanogl/texture"),h=a("nanogl-texture-loader"),i=a("config"),j=a("./jpeg-parser"),k=a("./textures-provider");d.prototype={createProvider:function(){var a=new k(this);return a},resolveUrl:function(a){return i.asset_url(a)},makeTex:function(a,b,c,d,f,h,i,j){h=void 0!==h?h:this.bbc,h=!1;var k=new g(this.gl,i),l=new e(this,k,a,b,c,d,f,h,j);return this.texDefs.push(l),l},loadTex:function(a,b,c,d,e,g,i,j){a.bind(),a.setFilter(d,c,g),j&&a.clamp(),i=this.resolveUrl(i),e=Math.min(this.maxAniso,e),e>0&&a.gl.texParameterf(a.gl.TEXTURE_2D,this.extAniso.TEXTURE_MAX_ANISOTROPY_EXT,e);var k=h.load(a,i);return c&&(k=k.then(f)),k}},e.prototype={_load:function(a){return this.loader.loadTex(this.tex,this.bbc,this.mipmap,this.smooth,this.aniso,this.miplinear,a,this.clamp)},load:function(){return this._load(this.url)}},b.exports=d},{"./jpeg-parser":1,"./textures-provider":4,config:5,"nanogl-texture-loader":35,"nanogl/texture":39}],4:[function(a,b,c){function d(a){this.lib=a,this._defs=[],this._lib={},this._list=[],this._dlib={}}d.prototype={register:function(a,b){void 0===this._lib[b]&&(this._dlib[b]=a,this._lib[b]=a.tex,this._defs.push(a),this._list.push(a.tex))},getTexture:function(a){var b=this._lib[a];if(void 0===b)throw new Error('texture "'+a+'" not found.');return b},getTextureDef:function(a){var b=this._dlib[a];if(void 0===b)throw new Error('texture def"'+a+'" not found.');return b},makeTex:function(a,b,c,d,e,f,g,h,i){e=void 0===e?16:e,d=void 0===d||d,c=void 0===c||c,f=void 0===f||f;var j=this.lib.makeTex(b,c,d,f,e,g,h,i);this.register(j,a)},getLoadables:function(){return this._defs.map(function(a){return a.load()})},dispose:function(){}},b.exports=d},{}],5:[function(a,b,c){var d="assets";b.exports={asset_url:function(a){return a}}},{}],6:[function(a,b,c){function d(a,b){var c=a.gl;this.time=0,this.scale=1,this.node=new f,this.container=new f,this.node.add(this.container),this.scene=a,this.gl=c,this.geoBuffer=new e(c,l),this.geoBuffer.attrib("aPosition",3,c.FLOAT),this.geoBuffer.attrib("aTexCoord",2,c.FLOAT),this.texs=a.texs.createProvider(),this.texs.makeTex("dog",config.pathRoot+"public/img/menu-max/dog.png",!1,!1,16,!0),this.texs.getTexture("dog").clamp(),this.customTextures(this.texs),this.prg=c.programs[b],this.cfg=c.state.config()}var e=a("nanogl/arraybuffer"),f=a("nanogl-node"),g=(a("nanogl/texture"),a("gl-matrix").mat4.create()),h=9.6,i=5.4;h=7,i=7;var j=[[-1*h,-1*i,0],[1*h,1*i,0],[-1*h,1*i,0],[-1*h,-1*i,0],[1*h,1*i,0],[1*h,-1*i,0]],k=[[0,1],[1,0],[0,0],[0,1],[1,0],[1,1]],l=new Float32Array(5*j.length),m=0,n=0;for(n=0;n<j.length;n++)l[m]=j[n][0],m++,l[m]=j[n][1],m++,l[m]=j[n][2],m++,l[m]=k[n][0],m++,l[m]=k[n][1],m++;d.prototype={customTextures:function(a){},customRender:function(a){},getLoadables:function(){return this.texs.getLoadables()},preRender:function(a){this.time+=a},render:function(){var a=this.prg,b=this.scene.camera;a.use(),b.modelViewProjectionMatrix(g,this.container._wmatrix),a.uMVP(g),a.uTime(this.time),a.uTexDog(this.texs.getTexture("dog")),this.customRender(a),this.cfg.apply(),this.geoBuffer.bind(),this.geoBuffer.attribPointer(a),this.geoBuffer.drawTriangles()}},b.exports=d},{"gl-matrix":16,"nanogl-node":30,"nanogl/arraybuffer":36,"nanogl/texture":39}],7:[function(a,b,c){function d(a){e.call(this,a,"frame1"),this.node.scale[0]=i,this.node.scale[1]=j,this.container.rotateZ(f),this.container.scale[0]=g,this.container.scale[1]=h}var e=a("../frame"),f=-.2,g=1,h=1,i=1,j=1;d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.customTextures=function(a){},d.prototype.customRender=function(a){a.uRotate1(f),a.uScale2(this.node.scale[0],this.node.scale[1]),a.uScale1(g,h)},b.exports=d},{"../frame":6}],8:[function(a,b,c){function d(a){e.call(this,a,"frame2"),this.node.scale[0]=i,this.node.scale[1]=j,this.container.rotateZ(f),this.container.scale[0]=g,this.container.scale[1]=h}var e=a("../frame"),f=-.6,g=.8,h=1.2,i=1,j=.75;d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.customTextures=function(a){},d.prototype.customRender=function(a){a.uRotate1(f),a.uScale2(this.node.scale[0],this.node.scale[1]),a.uScale1(g,h),this.container.invalidate()},b.exports=d},{"../frame":6}],9:[function(a,b,c){function d(a){e.call(this,a,"frame3"),this.node.scale[0]=i,this.node.scale[1]=j,this.container.rotateZ(f),this.container.scale[0]=g,this.container.scale[1]=h}var e=a("../frame"),f=-1,g=.7,h=.9,i=1.2,j=1;d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.customTextures=function(a){a.makeTex("border",config.pathRoot+"public/img/menu-max/edge.png",!0,!1,16,!1,!0),this.texs.getTexture("border").clamp()},d.prototype.customRender=function(a){a.uRotate1(f),a.uScale2(this.node.scale[0],this.node.scale[1]),a.uScale1(g,h),a.uTexBorder(this.texs.getTexture("border"))},b.exports=d},{"../frame":6}],10:[function(a,b,c){function d(){return t}function e(a){x=a,n()}function f(){return x}function g(){e(r)}function h(){e(s)}function i(){e(t)}function j(){e(u)}function k(a){return v[a][x]}function l(a,b,c){y.push({scope:a,fname:b}),c||a[b](!0)}function m(){y=[]}function n(){for(var a=0;a<y.length;a++)y[a].scope[y[a].fname](!1)}function o(){return v.assets_path[1]}function p(){var a=["#define "+k("shaderQuality")+" 1"];return a.join("\n")}var q=a("utils/getQuery"),r=3,s=2,t=1,u=0,v={half_dpi:[!1,!1,!1,!1],max_dpi:[1,1,.8,.5],anisotropy:[0,0,0,0],assets_path:["hd","hd","hd","hd"],bin_suff:["ld","ld","ld","ld"],shaderQuality:["QUALITY_LOW","QUALITY_MED","QUALITY_HI","QUALITY_HI"],blurSamples:[16,32,32,64],linearSampling:[!1,!1,!1,!1],shadows:[!1,!1,!1,!1],shadowFilter:["PCFNONE","PCFNONE","PCFNONE","PCFNONE"],shadowMapSize:[512,512,512,512],post:[!1,!1,!1,!1],dof:[!1,!1,!1,!1],bloom:[!1,!1,!1,!1]},w=q("quality",d()),x=parseInt(w),y=[],z={setUD:g,setHI:h,setMED:i,setLOW:j,setQuality:e,getQuality:f,param:k,on:l,release:m,getMacroDefs:p,lowTextDir:o};b.exports=z},{"utils/getQuery":14}],11:[function(a,b,c){function d(a){this.renderer=new e(a.cvs),this.renderer.parent=this}var e=a("./renderer");d.prototype={init:function(){this.renderer.scene.init(),this.renderer.scene.load().then(this.onLoaded.bind(this)),window.addEventListener("resize",this.resize.bind(this),!1)},"switch":function(a){this.renderer.scene["switch"](a)},stop:function(){this.renderer.stop()},resume:function(){this.renderer.play()},resize:function(){this.renderer.resize()},loaded:function(){},progress:function(a){},onLoaded:function(){this.resize(),this.renderer.play(),this.loaded()}},window.BG=d},{"./renderer":12}],12:[function(a,b,c){var d=a("nanogl-renderer"),e=a("./scene"),f=Math.min(2,window.devicePixelRatio),g=d({pixelRatio:f,hdpi:!1,init:function(){this.scene=new e(this)},getContextOptions:function(){return{depth:!0,stencil:!1,antialias:!0,alpha:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1}},render:function(a){this.scene.render(a)},resize:function(){this.scene.resize()}});b.exports=g},{"./scene":13,"nanogl-renderer":31}],13:[function(a,b,c){function d(a){this.renderer=a,this.gl=a.gl,this.dt=1/60}var e=(a("when"),a("nanogl-state")),f=a("nanogl-camera"),g=a("nanogl-node"),h=a("./utils/net"),i=a("gl-matrix").vec3,j=a("./assets/programs"),k=a("./assets/textures-loader"),l=a("./entities/frame/frame1/frame1"),m=a("./entities/frame/frame2/frame2"),n=a("./entities/frame/frame3/frame3"),o=1;i.create();d.prototype={init:function(){var a=this.gl;this.renderer._checkSize(),this.root=new g,this.time=0,this.camera=f.makePerspectiveCamera(),this.camera.lens.setAutoFov(43.68/180*Math.PI),this.camera.lens.near=.01,this.camera.lens.far=150;var b=i.create();b[0]=0,b[2]=20,b[1]=0,i.copy(this.camera.position,b);var c=i.create();this.camera.lookAt(c),a.state=new e(a),a.programs=new j(a),this.texs=new k(a),this.frame1=new l(this),this.frame2=new m(this),this.frame3=new n(this),this.initialCfg=a.state.config(),this.subroot=new g,this.root.add(this.subroot),this.subroot.add(this.camera),this.subroot.add(this.frame1.node),this.subroot.add(this.frame2.node),this.subroot.add(this.frame3.node),this.states={STATE_LOAD:"load",STATE_LOADED:"loaded"},this.state=this.states.STATE_LOAD},resize:function(){},render:function(a){if(this.state===this.states.STATE_LOADED){var b=this.gl;this.dt=a,this.time+=.001*a,s1=.4,s2=.4,s3=.6,sy1=.8,sy2=.6,sy3=1,1===o&&(s1=1),2===o&&(s2=1),3===o&&(s3=1.2),1===o&&(sy1=1),2===o&&(sy2=.75),3===o&&(sy3=1.2),this.frame1.node.scale[0]+=.131*(s1-this.frame1.node.scale[0]),this.frame2.node.scale[0]+=.131*(s2-this.frame2.node.scale[0]),this.frame3.node.scale[0]+=.131*(s3-this.frame3.node.scale[0]),this.frame1.node.scale[1]+=.131*(sy1-this.frame1.node.scale[1]),this.frame2.node.scale[1]+=.131*(sy2-this.frame2.node.scale[1]),this.frame3.node.scale[1]+=.131*(sy3-this.frame3.node.scale[1]),this.frame1.preRender(a),this.frame2.preRender(a),this.frame3.preRender(a),this.frame1.node.invalidate(),this.frame2.node.invalidate(),this.frame3.node.invalidate(),this.root.updateWorldMatrix(),this.camera.updateViewProjectionMatrix(this.renderer.width,this.renderer.height),this.renderScene(),b.state.apply()}},renderScene:function(a){this.gl.state.push(this.initialCfg),this.gl.viewport(0,0,this.renderer.width,this.renderer.height),this.gl.clearColor(.97,.97,.97,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.renderColor()},renderColor:function(){1===o&&this.frame1.render(),2===o&&this.frame2.render(),3===o&&this.frame3.render()},load:function(){var a=[];return a=a.concat(this.frame1.getLoadables()),a=a.concat(this.frame2.getLoadables()),a=a.concat(this.frame3.getLoadables()),h.whenAll(a).then(this.onLoaded.bind(this),null,this.onLoadProgress.bind(this))},"switch":function(a){o=a,this.renderer._playing||this.render(0)},onLoaded:function(){this.state=this.states.STATE_LOADED},onLoadProgress:function(a){return this.renderer.parent.progress(a),!0}},b.exports=d},{"./assets/programs":2,"./assets/textures-loader":3,"./entities/frame/frame1/frame1":7,"./entities/frame/frame2/frame2":8,"./entities/frame/frame3/frame3":9,"./utils/net":15,"gl-matrix":16,"nanogl-camera":26,"nanogl-node":30,"nanogl-state":34,when:62}],14:[function(a,b,c){b.exports=function(a,b){var c,d;return void 0===b&&(b=""),d=new RegExp("&?"+a+"=([^&]+)","g"),c=d.exec(location.search),c?c[1].replace(/%20|\+/g," "):b}},{}],15:[function(a,b,c){function d(a){function b(){d--,c.notify(1-d/a.length),0===d&&c.resolve(!0)}for(var c=l.defer(),d=a.length,e=0;e<a.length;e++)a[e].then(b,c.reject);return c.promise}function e(a,b){var c=l.defer(),d=l.defer(),e=Date.now(),f=0;a.then(null,null,function(a){f=a});var g=setInterval(function(){var a=Date.now()-e,g=Math.min(a/b,f);a>b&&d.resolve(),c.notify(g)},50);return l.all([a,d.promise]).then(function(){clearInterval(g),c.resolve(!0)}),c.promise}function f(a){return j(a,"").then(function(a){return JSON.parse(a)})}function g(a,b){return k(a,b).then(function(a){return JSON.parse(a)})}function h(a){return j(a,"arraybuffer")}function i(a){var b=l.defer(),c=new Image;return c.onload=function(){b.resolve(c)},c.onerror=function(){b.reject()},c.crossOrigin="anonymous",c.src=a,b.promise}function j(a,b){var c,d,e="GET";return c=l.defer(),d=new XMLHttpRequest,d.open(e,a,!0),d.responseType=b,d.onload=function(){return c.resolve(d.response)},d.error=function(a){return c.reject(a)},d.send(),c.promise}function k(a,b){var c,d,e="POST",f="",g="";for(var h in b)f+=g+h+"="+b[h],g="&";return c=l.defer(),d=new XMLHttpRequest,d.open(e,a,!0),d.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),d.onload=function(){return c.resolve(d.response)},d.error=function(a){return c.reject(a)},d.send(f),c.promise}var l=a("when");b.exports={post:g,loadJson:f,loadBytes:h,loadImage:i,whenAll:d,throttling:e}},{when:62}],16:[function(a,b,c){c.glMatrix=a("./gl-matrix/common.js"),c.mat2=a("./gl-matrix/mat2.js"),c.mat2d=a("./gl-matrix/mat2d.js"),c.mat3=a("./gl-matrix/mat3.js"),c.mat4=a("./gl-matrix/mat4.js"),c.quat=a("./gl-matrix/quat.js"),c.vec2=a("./gl-matrix/vec2.js"),c.vec3=a("./gl-matrix/vec3.js"),c.vec4=a("./gl-matrix/vec4.js")},{"./gl-matrix/common.js":17,"./gl-matrix/mat2.js":18,"./gl-matrix/mat2d.js":19,"./gl-matrix/mat3.js":20,"./gl-matrix/mat4.js":21,"./gl-matrix/quat.js":22,"./gl-matrix/vec2.js":23,"./gl-matrix/vec3.js":24,"./gl-matrix/vec4.js":25}],17:[function(a,b,c){var d={};d.EPSILON=1e-6,d.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,d.RANDOM=Math.random,d.setMatrixArrayType=function(a){GLMAT_ARRAY_TYPE=a};var e=Math.PI/180;d.toRadian=function(a){return a*e},b.exports=d},{}],18:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(4);return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},e.clone=function(a){var b=new d.ARRAY_TYPE(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},e.transpose=function(a,b){if(a===b){var c=b[1];a[1]=b[2],a[2]=c}else a[0]=b[0],a[1]=b[2],a[2]=b[1],a[3]=b[3];return a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*f-e*d;return g?(g=1/g,a[0]=f*g,a[1]=-d*g,a[2]=-e*g,a[3]=c*g,a):null},e.adjoint=function(a,b){var c=b[0];return a[0]=b[3],a[1]=-b[1],a[2]=-b[2],a[3]=c,a},e.determinant=function(a){return a[0]*a[3]-a[2]*a[1]},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1],j=c[2],k=c[3];return a[0]=d*h+f*i,a[1]=e*h+g*i,a[2]=d*j+f*k,a[3]=e*j+g*k,a},e.mul=e.multiply,e.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+f*h,a[1]=e*i+g*h,a[2]=d*-h+f*i,a[3]=e*-h+g*i,a},e.scale=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1];return a[0]=d*h,a[1]=e*h,a[2]=f*i,a[3]=g*i,a},e.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=-c,a[3]=d,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=b[1],a},e.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))},e.LDU=function(a,b,c,d){return a[2]=d[2]/d[0],c[0]=d[0],c[1]=d[1],c[3]=d[3]-a[2]*c[1],[a,b,c]},b.exports=e},{"./common.js":17}],19:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(6);return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(6);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=c*f-d*e;return i?(i=1/i,a[0]=f*i,a[1]=-d*i,a[2]=-e*i,a[3]=c*i,a[4]=(e*h-f*g)*i,a[5]=(d*g-c*h)*i,a):null},e.determinant=function(a){return a[0]*a[3]-a[1]*a[2]},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1],l=c[2],m=c[3],n=c[4],o=c[5];return a[0]=d*j+f*k,a[1]=e*j+g*k,a[2]=d*l+f*m,a[3]=e*l+g*m,a[4]=d*n+f*o+h,a[5]=e*n+g*o+i,a},e.mul=e.multiply,e.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=Math.sin(c),k=Math.cos(c);return a[0]=d*k+f*j,a[1]=e*k+g*j,a[2]=d*-j+f*k,a[3]=e*-j+g*k,a[4]=h,a[5]=i,a},e.scale=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1];return a[0]=d*j,a[1]=e*j,a[2]=f*k,a[3]=g*k,a[4]=h,a[5]=i,a},e.translate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1];return a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=d*j+f*k+h,a[5]=e*j+g*k+i,a},e.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=-c,a[3]=d,a[4]=0,a[5]=0,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=b[1],a[4]=0,a[5]=0,a},e.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=b[0],a[5]=b[1],a},e.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)},b.exports=e},{"./common.js":17}],20:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(9);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.fromMat4=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[4],a[4]=b[5],a[5]=b[6],a[6]=b[8],a[7]=b[9],a[8]=b[10],a},e.clone=function(a){var b=new d.ARRAY_TYPE(9);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],e=b[5];a[1]=b[3],a[2]=b[6],a[3]=c,a[5]=b[7],a[6]=d,a[7]=e}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=k*g-h*j,m=-k*f+h*i,n=j*f-g*i,o=c*l+d*m+e*n;return o?(o=1/o,a[0]=l*o,a[1]=(-k*d+e*j)*o,a[2]=(h*d-e*g)*o,a[3]=m*o,a[4]=(k*c-e*i)*o,a[5]=(-h*c+e*f)*o,a[6]=n*o,a[7]=(-j*c+d*i)*o,a[8]=(g*c-d*f)*o,a):null},e.adjoint=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8];return a[0]=g*k-h*j,a[1]=e*j-d*k,a[2]=d*h-e*g,a[3]=h*i-f*k,a[4]=c*k-e*i,a[5]=e*f-c*h,a[6]=f*j-g*i,a[7]=d*i-c*j,a[8]=c*g-d*f,a},e.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8];return b*(j*f-g*i)+c*(-j*e+g*h)+d*(i*e-f*h)},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=c[0],n=c[1],o=c[2],p=c[3],q=c[4],r=c[5],s=c[6],t=c[7],u=c[8];return a[0]=m*d+n*g+o*j,a[1]=m*e+n*h+o*k,a[2]=m*f+n*i+o*l,a[3]=p*d+q*g+r*j,a[4]=p*e+q*h+r*k,a[5]=p*f+q*i+r*l,a[6]=s*d+t*g+u*j,a[7]=s*e+t*h+u*k,a[8]=s*f+t*i+u*l,a},e.mul=e.multiply,e.translate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=c[0],n=c[1];return a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=m*d+n*g+j,a[7]=m*e+n*h+k,a[8]=m*f+n*i+l,a},e.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=Math.sin(c),n=Math.cos(c);return a[0]=n*d+m*g,a[1]=n*e+m*h,a[2]=n*f+m*i,a[3]=n*g-m*d,a[4]=n*h-m*e,a[5]=n*i-m*f,a[6]=j,a[7]=k,a[8]=l,a},e.scale=function(a,b,c){var d=c[0],e=c[1];return a[0]=d*b[0],a[1]=d*b[1],a[2]=d*b[2],a[3]=e*b[3],a[4]=e*b[4],a[5]=e*b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a},e.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=b[0],a[7]=b[1],a[8]=1,a},e.fromRotation=function(a,b){
var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=0,a[3]=-c,a[4]=d,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=0,a[4]=b[1],a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.fromMat2d=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=0,a[3]=b[2],a[4]=b[3],a[5]=0,a[6]=b[4],a[7]=b[5],a[8]=1,a},e.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,i=e+e,j=c*g,k=d*g,l=d*h,m=e*g,n=e*h,o=e*i,p=f*g,q=f*h,r=f*i;return a[0]=1-l-o,a[3]=k-r,a[6]=m+q,a[1]=k+r,a[4]=1-j-o,a[7]=n-p,a[2]=m-q,a[5]=n+p,a[8]=1-j-l,a},e.normalFromMat4=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(i*A-g*D-j*z)*E,a[2]=(g*C-h*A+j*y)*E,a[3]=(e*C-d*D-f*B)*E,a[4]=(c*D-e*A+f*z)*E,a[5]=(d*A-c*C-f*y)*E,a[6]=(p*x-q*w+r*v)*E,a[7]=(q*u-o*x-r*t)*E,a[8]=(o*w-p*u+r*s)*E,a):null},e.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))},b.exports=e},{"./common.js":17}],21:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.clone=function(a){var b=new d.ARRAY_TYPE(16);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],e=b[3],f=b[6],g=b[7],h=b[11];a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=c,a[6]=b[9],a[7]=b[13],a[8]=d,a[9]=f,a[11]=b[14],a[12]=e,a[13]=g,a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(e*C-d*D-f*B)*E,a[2]=(p*x-q*w+r*v)*E,a[3]=(m*w-l*x-n*v)*E,a[4]=(i*A-g*D-j*z)*E,a[5]=(c*D-e*A+f*z)*E,a[6]=(q*u-o*x-r*t)*E,a[7]=(k*x-m*u+n*t)*E,a[8]=(g*C-h*A+j*y)*E,a[9]=(d*A-c*C-f*y)*E,a[10]=(o*w-p*u+r*s)*E,a[11]=(l*u-k*w-n*s)*E,a[12]=(h*z-g*B-i*y)*E,a[13]=(c*B-d*z+e*y)*E,a[14]=(p*t-o*v-q*s)*E,a[15]=(k*v-l*t+m*s)*E,a):null},e.adjoint=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15];return a[0]=h*(m*r-n*q)-l*(i*r-j*q)+p*(i*n-j*m),a[1]=-(d*(m*r-n*q)-l*(e*r-f*q)+p*(e*n-f*m)),a[2]=d*(i*r-j*q)-h*(e*r-f*q)+p*(e*j-f*i),a[3]=-(d*(i*n-j*m)-h*(e*n-f*m)+l*(e*j-f*i)),a[4]=-(g*(m*r-n*q)-k*(i*r-j*q)+o*(i*n-j*m)),a[5]=c*(m*r-n*q)-k*(e*r-f*q)+o*(e*n-f*m),a[6]=-(c*(i*r-j*q)-g*(e*r-f*q)+o*(e*j-f*i)),a[7]=c*(i*n-j*m)-g*(e*n-f*m)+k*(e*j-f*i),a[8]=g*(l*r-n*p)-k*(h*r-j*p)+o*(h*n-j*l),a[9]=-(c*(l*r-n*p)-k*(d*r-f*p)+o*(d*n-f*l)),a[10]=c*(h*r-j*p)-g*(d*r-f*p)+o*(d*j-f*h),a[11]=-(c*(h*n-j*l)-g*(d*n-f*l)+k*(d*j-f*h)),a[12]=-(g*(l*q-m*p)-k*(h*q-i*p)+o*(h*m-i*l)),a[13]=c*(l*q-m*p)-k*(d*q-e*p)+o*(d*m-e*l),a[14]=-(c*(h*q-i*p)-g*(d*q-e*p)+o*(d*i-e*h)),a[15]=c*(h*m-i*l)-g*(d*m-e*l)+k*(d*i-e*h),a},e.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8],k=a[9],l=a[10],m=a[11],n=a[12],o=a[13],p=a[14],q=a[15],r=b*g-c*f,s=b*h-d*f,t=b*i-e*f,u=c*h-d*g,v=c*i-e*g,w=d*i-e*h,x=j*o-k*n,y=j*p-l*n,z=j*q-m*n,A=k*p-l*o,B=k*q-m*o,C=l*q-m*p;return r*C-s*B+t*A+u*z-v*y+w*x},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],p=b[12],q=b[13],r=b[14],s=b[15],t=c[0],u=c[1],v=c[2],w=c[3];return a[0]=t*d+u*h+v*l+w*p,a[1]=t*e+u*i+v*m+w*q,a[2]=t*f+u*j+v*n+w*r,a[3]=t*g+u*k+v*o+w*s,t=c[4],u=c[5],v=c[6],w=c[7],a[4]=t*d+u*h+v*l+w*p,a[5]=t*e+u*i+v*m+w*q,a[6]=t*f+u*j+v*n+w*r,a[7]=t*g+u*k+v*o+w*s,t=c[8],u=c[9],v=c[10],w=c[11],a[8]=t*d+u*h+v*l+w*p,a[9]=t*e+u*i+v*m+w*q,a[10]=t*f+u*j+v*n+w*r,a[11]=t*g+u*k+v*o+w*s,t=c[12],u=c[13],v=c[14],w=c[15],a[12]=t*d+u*h+v*l+w*p,a[13]=t*e+u*i+v*m+w*q,a[14]=t*f+u*j+v*n+w*r,a[15]=t*g+u*k+v*o+w*s,a},e.mul=e.multiply,e.translate=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=c[0],q=c[1],r=c[2];return b===a?(a[12]=b[0]*p+b[4]*q+b[8]*r+b[12],a[13]=b[1]*p+b[5]*q+b[9]*r+b[13],a[14]=b[2]*p+b[6]*q+b[10]*r+b[14],a[15]=b[3]*p+b[7]*q+b[11]*r+b[15]):(d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=j,a[7]=k,a[8]=l,a[9]=m,a[10]=n,a[11]=o,a[12]=d*p+h*q+l*r+b[12],a[13]=e*p+i*q+m*r+b[13],a[14]=f*p+j*q+n*r+b[14],a[15]=g*p+k*q+o*r+b[15]),a},e.scale=function(a,b,c){var d=c[0],e=c[1],f=c[2];return a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d,a[4]=b[4]*e,a[5]=b[5]*e,a[6]=b[6]*e,a[7]=b[7]*e,a[8]=b[8]*f,a[9]=b[9]*f,a[10]=b[10]*f,a[11]=b[11]*f,a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},e.rotate=function(a,b,c,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=e[0],E=e[1],F=e[2],G=Math.sqrt(D*D+E*E+F*F);return Math.abs(G)<d.EPSILON?null:(G=1/G,D*=G,E*=G,F*=G,f=Math.sin(c),g=Math.cos(c),h=1-g,i=b[0],j=b[1],k=b[2],l=b[3],m=b[4],n=b[5],o=b[6],p=b[7],q=b[8],r=b[9],s=b[10],t=b[11],u=D*D*h+g,v=E*D*h+F*f,w=F*D*h-E*f,x=D*E*h-F*f,y=E*E*h+g,z=F*E*h+D*f,A=D*F*h+E*f,B=E*F*h-D*f,C=F*F*h+g,a[0]=i*u+m*v+q*w,a[1]=j*u+n*v+r*w,a[2]=k*u+o*v+s*w,a[3]=l*u+p*v+t*w,a[4]=i*x+m*y+q*z,a[5]=j*x+n*y+r*z,a[6]=k*x+o*y+s*z,a[7]=l*x+p*y+t*z,a[8]=i*A+m*B+q*C,a[9]=j*A+n*B+r*C,a[10]=k*A+o*B+s*C,a[11]=l*A+p*B+t*C,b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a)},e.rotateX=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[4],g=b[5],h=b[6],i=b[7],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[4]=f*e+j*d,a[5]=g*e+k*d,a[6]=h*e+l*d,a[7]=i*e+m*d,a[8]=j*e-f*d,a[9]=k*e-g*d,a[10]=l*e-h*d,a[11]=m*e-i*d,a},e.rotateY=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e-j*d,a[1]=g*e-k*d,a[2]=h*e-l*d,a[3]=i*e-m*d,a[8]=f*d+j*e,a[9]=g*d+k*e,a[10]=h*d+l*e,a[11]=i*d+m*e,a},e.rotateZ=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[4],k=b[5],l=b[6],m=b[7];return b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e+j*d,a[1]=g*e+k*d,a[2]=h*e+l*d,a[3]=i*e+m*d,a[4]=j*e-f*d,a[5]=k*e-g*d,a[6]=l*e-h*d,a[7]=m*e-i*d,a},e.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=b[0],a[13]=b[1],a[14]=b[2],a[15]=1,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=b[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=b[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromRotation=function(a,b,c){var e,f,g,h=c[0],i=c[1],j=c[2],k=Math.sqrt(h*h+i*i+j*j);return Math.abs(k)<d.EPSILON?null:(k=1/k,h*=k,i*=k,j*=k,e=Math.sin(b),f=Math.cos(b),g=1-f,a[0]=h*h*g+f,a[1]=i*h*g+j*e,a[2]=j*h*g-i*e,a[3]=0,a[4]=h*i*g-j*e,a[5]=i*i*g+f,a[6]=j*i*g+h*e,a[7]=0,a[8]=h*j*g+i*e,a[9]=i*j*g-h*e,a[10]=j*j*g+f,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)},e.fromXRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=d,a[6]=c,a[7]=0,a[8]=0,a[9]=-c,a[10]=d,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromYRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=0,a[2]=-c,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=c,a[9]=0,a[10]=d,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromZRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=0,a[3]=0,a[4]=-c,a[5]=d,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromRotationTranslation=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=d+d,i=e+e,j=f+f,k=d*h,l=d*i,m=d*j,n=e*i,o=e*j,p=f*j,q=g*h,r=g*i,s=g*j;return a[0]=1-(n+p),a[1]=l+s,a[2]=m-r,a[3]=0,a[4]=l-s,a[5]=1-(k+p),a[6]=o+q,a[7]=0,a[8]=m+r,a[9]=o-q,a[10]=1-(k+n),a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a},e.fromRotationTranslationScale=function(a,b,c,d){var e=b[0],f=b[1],g=b[2],h=b[3],i=e+e,j=f+f,k=g+g,l=e*i,m=e*j,n=e*k,o=f*j,p=f*k,q=g*k,r=h*i,s=h*j,t=h*k,u=d[0],v=d[1],w=d[2];return a[0]=(1-(o+q))*u,a[1]=(m+t)*u,a[2]=(n-s)*u,a[3]=0,a[4]=(m-t)*v,a[5]=(1-(l+q))*v,a[6]=(p+r)*v,a[7]=0,a[8]=(n+s)*w,a[9]=(p-r)*w,a[10]=(1-(l+o))*w,a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a},e.fromRotationTranslationScaleOrigin=function(a,b,c,d,e){var f=b[0],g=b[1],h=b[2],i=b[3],j=f+f,k=g+g,l=h+h,m=f*j,n=f*k,o=f*l,p=g*k,q=g*l,r=h*l,s=i*j,t=i*k,u=i*l,v=d[0],w=d[1],x=d[2],y=e[0],z=e[1],A=e[2];return a[0]=(1-(p+r))*v,a[1]=(n+u)*v,a[2]=(o-t)*v,a[3]=0,a[4]=(n-u)*w,a[5]=(1-(m+r))*w,a[6]=(q+s)*w,a[7]=0,a[8]=(o+t)*x,a[9]=(q-s)*x,a[10]=(1-(m+p))*x,a[11]=0,a[12]=c[0]+y-(a[0]*y+a[4]*z+a[8]*A),a[13]=c[1]+z-(a[1]*y+a[5]*z+a[9]*A),a[14]=c[2]+A-(a[2]*y+a[6]*z+a[10]*A),a[15]=1,a},e.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,i=e+e,j=c*g,k=d*g,l=d*h,m=e*g,n=e*h,o=e*i,p=f*g,q=f*h,r=f*i;return a[0]=1-l-o,a[1]=k+r,a[2]=m-q,a[3]=0,a[4]=k-r,a[5]=1-j-o,a[6]=n+p,a[7]=0,a[8]=m+q,a[9]=n-p,a[10]=1-j-l,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.frustum=function(a,b,c,d,e,f,g){var h=1/(c-b),i=1/(e-d),j=1/(f-g);return a[0]=2*f*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*f*i,a[6]=0,a[7]=0,a[8]=(c+b)*h,a[9]=(e+d)*i,a[10]=(g+f)*j,a[11]=-1,a[12]=0,a[13]=0,a[14]=g*f*2*j,a[15]=0,a},e.perspective=function(a,b,c,d,e){var f=1/Math.tan(b/2),g=1/(d-e);return a[0]=f/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=f,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(e+d)*g,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*e*d*g,a[15]=0,a},e.perspectiveFromFieldOfView=function(a,b,c,d){var e=Math.tan(b.upDegrees*Math.PI/180),f=Math.tan(b.downDegrees*Math.PI/180),g=Math.tan(b.leftDegrees*Math.PI/180),h=Math.tan(b.rightDegrees*Math.PI/180),i=2/(g+h),j=2/(e+f);return a[0]=i,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=j,a[6]=0,a[7]=0,a[8]=-((g-h)*i*.5),a[9]=(e-f)*j*.5,a[10]=d/(c-d),a[11]=-1,a[12]=0,a[13]=0,a[14]=d*c/(c-d),a[15]=0,a},e.ortho=function(a,b,c,d,e,f,g){var h=1/(b-c),i=1/(d-e),j=1/(f-g);return a[0]=-2*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*i,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*j,a[11]=0,a[12]=(b+c)*h,a[13]=(e+d)*i,a[14]=(g+f)*j,a[15]=1,a},e.lookAt=function(a,b,c,f){var g,h,i,j,k,l,m,n,o,p,q=b[0],r=b[1],s=b[2],t=f[0],u=f[1],v=f[2],w=c[0],x=c[1],y=c[2];return Math.abs(q-w)<d.EPSILON&&Math.abs(r-x)<d.EPSILON&&Math.abs(s-y)<d.EPSILON?e.identity(a):(m=q-w,n=r-x,o=s-y,p=1/Math.sqrt(m*m+n*n+o*o),m*=p,n*=p,o*=p,g=u*o-v*n,h=v*m-t*o,i=t*n-u*m,p=Math.sqrt(g*g+h*h+i*i),p?(p=1/p,g*=p,h*=p,i*=p):(g=0,h=0,i=0),j=n*i-o*h,k=o*g-m*i,l=m*h-n*g,p=Math.sqrt(j*j+k*k+l*l),p?(p=1/p,j*=p,k*=p,l*=p):(j=0,k=0,l=0),a[0]=g,a[1]=j,a[2]=m,a[3]=0,a[4]=h,a[5]=k,a[6]=n,a[7]=0,a[8]=i,a[9]=l,a[10]=o,a[11]=0,a[12]=-(g*q+h*r+i*s),a[13]=-(j*q+k*r+l*s),a[14]=-(m*q+n*r+o*s),a[15]=1,a)},e.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))},b.exports=e},{"./common.js":17}],22:[function(a,b,c){var d=a("./common.js"),e=a("./mat3.js"),f=a("./vec3.js"),g=a("./vec4.js"),h={};h.create=function(){var a=new d.ARRAY_TYPE(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a},h.rotationTo=function(){var a=f.create(),b=f.fromValues(1,0,0),c=f.fromValues(0,1,0);return function(d,e,g){var i=f.dot(e,g);return i<-.999999?(f.cross(a,b,e),f.length(a)<1e-6&&f.cross(a,c,e),f.normalize(a,a),h.setAxisAngle(d,a,Math.PI),d):i>.999999?(d[0]=0,d[1]=0,d[2]=0,d[3]=1,d):(f.cross(a,e,g),d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=1+i,h.normalize(d,d))}}(),h.setAxes=function(){var a=e.create();return function(b,c,d,e){return a[0]=d[0],a[3]=d[1],a[6]=d[2],a[1]=e[0],a[4]=e[1],a[7]=e[2],a[2]=-c[0],a[5]=-c[1],a[8]=-c[2],h.normalize(b,h.fromMat3(b,a))}}(),h.clone=g.clone,h.fromValues=g.fromValues,h.copy=g.copy,h.set=g.set,h.identity=function(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a},h.setAxisAngle=function(a,b,c){c=.5*c;var d=Math.sin(c);return a[0]=d*b[0],a[1]=d*b[1],a[2]=d*b[2],a[3]=Math.cos(c),a},h.add=g.add,h.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1],j=c[2],k=c[3];return a[0]=d*k+g*h+e*j-f*i,a[1]=e*k+g*i+f*h-d*j,a[2]=f*k+g*j+d*i-e*h,a[3]=g*k-d*h-e*i-f*j,a},h.mul=h.multiply,h.scale=g.scale,h.rotateX=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+g*h,a[1]=e*i+f*h,a[2]=f*i-e*h,a[3]=g*i-d*h,a},h.rotateY=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i-f*h,a[1]=e*i+g*h,a[2]=f*i+d*h,a[3]=g*i-e*h,a},h.rotateZ=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+e*h,a[1]=e*i-d*h,a[2]=f*i+g*h,a[3]=g*i-f*h,a},h.calculateW=function(a,b){var c=b[0],d=b[1],e=b[2];return a[0]=c,a[1]=d,a[2]=e,a[3]=Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a},h.dot=g.dot,h.lerp=g.lerp,h.slerp=function(a,b,c,d){var e,f,g,h,i,j=b[0],k=b[1],l=b[2],m=b[3],n=c[0],o=c[1],p=c[2],q=c[3];return f=j*n+k*o+l*p+m*q,f<0&&(f=-f,n=-n,o=-o,p=-p,q=-q),1-f>1e-6?(e=Math.acos(f),g=Math.sin(e),h=Math.sin((1-d)*e)/g,i=Math.sin(d*e)/g):(h=1-d,i=d),a[0]=h*j+i*n,a[1]=h*k+i*o,a[2]=h*l+i*p,a[3]=h*m+i*q,a},h.sqlerp=function(){var a=h.create(),b=h.create();return function(c,d,e,f,g,i){return h.slerp(a,d,g,i),h.slerp(b,e,f,i),h.slerp(c,a,b,2*i*(1-i)),c}}(),h.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f,h=g?1/g:0;return a[0]=-c*h,a[1]=-d*h,a[2]=-e*h,a[3]=f*h,a},h.conjugate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=b[3],a},h.length=g.length,h.len=h.length,h.squaredLength=g.squaredLength,h.sqrLen=h.squaredLength,h.normalize=g.normalize,h.fromMat3=function(a,b){var c,d=b[0]+b[4]+b[8];if(d>0)c=Math.sqrt(d+1),a[3]=.5*c,c=.5/c,a[0]=(b[5]-b[7])*c,a[1]=(b[6]-b[2])*c,a[2]=(b[1]-b[3])*c;else{var e=0;b[4]>b[0]&&(e=1),b[8]>b[3*e+e]&&(e=2);var f=(e+1)%3,g=(e+2)%3;c=Math.sqrt(b[3*e+e]-b[3*f+f]-b[3*g+g]+1),a[e]=.5*c,c=.5/c,a[3]=(b[3*f+g]-b[3*g+f])*c,a[f]=(b[3*f+e]+b[3*e+f])*c,a[g]=(b[3*g+e]+b[3*e+g])*c}return a},h.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},b.exports=h},{"./common.js":17,"./mat3.js":20,"./vec3.js":24,"./vec4.js":25}],23:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(2);return a[0]=0,a[1]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(2);return b[0]=a[0],b[1]=a[1],b},e.fromValues=function(a,b){var c=new d.ARRAY_TYPE(2);return c[0]=a,c[1]=b,c},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a},e.set=function(a,b,c){return a[0]=b,a[1]=c,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a},e.sub=e.subtract,e.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a},e.mul=e.multiply,e.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a},e.div=e.divide,e.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a},e.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a},e.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a},e.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a},e.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)},e.dist=e.distance,e.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d},e.sqrDist=e.squaredDistance,e.length=function(a){var b=a[0],c=a[1];return Math.sqrt(b*b+c*c)},e.len=e.length,e.squaredLength=function(a){var b=a[0],c=a[1];return b*b+c*c},e.sqrLen=e.squaredLength,e.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a},e.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a},e.normalize=function(a,b){var c=b[0],d=b[1],e=c*c+d*d;return e>0&&(e=1/Math.sqrt(e),a[0]=b[0]*e,a[1]=b[1]*e),a},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]},e.cross=function(a,b,c){var d=b[0]*c[1]-b[1]*c[0];return a[0]=a[1]=0,a[2]=d,a},e.lerp=function(a,b,c,d){var e=b[0],f=b[1];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a},e.random=function(a,b){b=b||1;var c=2*d.RANDOM()*Math.PI;return a[0]=Math.cos(c)*b,a[1]=Math.sin(c)*b,a},e.transformMat2=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[2]*e,a[1]=c[1]*d+c[3]*e,a},e.transformMat2d=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[2]*e+c[4],a[1]=c[1]*d+c[3]*e+c[5],a},e.transformMat3=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[3]*e+c[6],a[1]=c[1]*d+c[4]*e+c[7],a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[4]*e+c[12],a[1]=c[1]*d+c[5]*e+c[13],a},e.forEach=function(){var a=e.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=2),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;h<i;h+=c)a[0]=b[h],a[1]=b[h+1],f(a,a,g),b[h]=a[0],b[h+1]=a[1];return b}}(),e.str=function(a){return"vec2("+a[0]+", "+a[1]+")"},b.exports=e},{"./common.js":17}],24:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(3);return a[0]=0,a[1]=0,a[2]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(3);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b},e.fromValues=function(a,b,c){var e=new d.ARRAY_TYPE(3);return e[0]=a,e[1]=b,e[2]=c,e},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a},e.set=function(a,b,c,d){return a[0]=b,a[1]=c,a[2]=d,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a},e.sub=e.subtract,e.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a},e.mul=e.multiply,e.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],a},e.div=e.divide,e.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a[2]=Math.min(b[2],c[2]),a},e.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a[2]=Math.max(b[2],c[2]),a},e.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a},e.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a},e.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return Math.sqrt(c*c+d*d+e*e)},e.dist=e.distance,e.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return c*c+d*d+e*e},e.sqrDist=e.squaredDistance,e.length=function(a){var b=a[0],c=a[1],d=a[2];return Math.sqrt(b*b+c*c+d*d)},e.len=e.length,e.squaredLength=function(a){var b=a[0],c=a[1],d=a[2];return b*b+c*c+d*d},e.sqrLen=e.squaredLength,e.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a},e.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a[2]=1/b[2],a},e.normalize=function(a,b){var c=b[0],d=b[1],e=b[2],f=c*c+d*d+e*e;return f>0&&(f=1/Math.sqrt(f),a[0]=b[0]*f,a[1]=b[1]*f,a[2]=b[2]*f),a},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},e.cross=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2];return a[0]=e*i-f*h,a[1]=f*g-d*i,a[2]=d*h-e*g,a},e.lerp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a},e.hermite=function(a,b,c,d,e,f){var g=f*f,h=g*(2*f-3)+1,i=g*(f-2)+f,j=g*(f-1),k=g*(3-2*f);return a[0]=b[0]*h+c[0]*i+d[0]*j+e[0]*k,a[1]=b[1]*h+c[1]*i+d[1]*j+e[1]*k,a[2]=b[2]*h+c[2]*i+d[2]*j+e[2]*k,a},e.bezier=function(a,b,c,d,e,f){var g=1-f,h=g*g,i=f*f,j=h*g,k=3*f*h,l=3*i*g,m=i*f;return a[0]=b[0]*j+c[0]*k+d[0]*l+e[0]*m,a[1]=b[1]*j+c[1]*k+d[1]*l+e[1]*m,a[2]=b[2]*j+c[2]*k+d[2]*l+e[2]*m,a},e.random=function(a,b){b=b||1;var c=2*d.RANDOM()*Math.PI,e=2*d.RANDOM()-1,f=Math.sqrt(1-e*e)*b;return a[0]=Math.cos(c)*f,a[1]=Math.sin(c)*f,a[2]=e*b,a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[3]*d+c[7]*e+c[11]*f+c[15];return g=g||1,a[0]=(c[0]*d+c[4]*e+c[8]*f+c[12])/g,a[1]=(c[1]*d+c[5]*e+c[9]*f+c[13])/g,a[2]=(c[2]*d+c[6]*e+c[10]*f+c[14])/g,a},e.transformMat3=function(a,b,c){var d=b[0],e=b[1],f=b[2];return a[0]=d*c[0]+e*c[3]+f*c[6],a[1]=d*c[1]+e*c[4]+f*c[7],a[2]=d*c[2]+e*c[5]+f*c[8],a},e.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2],j=c[3],k=j*d+h*f-i*e,l=j*e+i*d-g*f,m=j*f+g*e-h*d,n=-g*d-h*e-i*f;return a[0]=k*j+n*-g+l*-i-m*-h,a[1]=l*j+n*-h+m*-g-k*-i,a[2]=m*j+n*-i+k*-h-l*-g,a},e.rotateX=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[0],f[1]=e[1]*Math.cos(d)-e[2]*Math.sin(d),f[2]=e[1]*Math.sin(d)+e[2]*Math.cos(d),a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},e.rotateY=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[2]*Math.sin(d)+e[0]*Math.cos(d),f[1]=e[1],f[2]=e[2]*Math.cos(d)-e[0]*Math.sin(d),a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},e.rotateZ=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[0]*Math.cos(d)-e[1]*Math.sin(d),f[1]=e[0]*Math.sin(d)+e[1]*Math.cos(d),f[2]=e[2],a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},e.forEach=function(){var a=e.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=3),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;h<i;h+=c)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],f(a,a,g),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2];return b}}(),e.angle=function(a,b){var c=e.fromValues(a[0],a[1],a[2]),d=e.fromValues(b[0],b[1],b[2]);e.normalize(c,c),e.normalize(d,d);var f=e.dot(c,d);return f>1?0:Math.acos(f)},e.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"},b.exports=e},{"./common.js":17}],25:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},e.fromValues=function(a,b,c,e){var f=new d.ARRAY_TYPE(4);return f[0]=a,f[1]=b,f[2]=c,f[3]=e,f},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},e.set=function(a,b,c,d,e){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a},e.sub=e.subtract,e.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a[3]=b[3]*c[3],a},e.mul=e.multiply,e.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],a[3]=b[3]/c[3],a},e.div=e.divide,e.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a[2]=Math.min(b[2],c[2]),a[3]=Math.min(b[3],c[3]),a},e.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a[2]=Math.max(b[2],c[2]),a[3]=Math.max(b[3],c[3]),a},e.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a},e.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a},e.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return Math.sqrt(c*c+d*d+e*e+f*f)},e.dist=e.distance,e.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return c*c+d*d+e*e+f*f},e.sqrDist=e.squaredDistance,e.length=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return Math.sqrt(b*b+c*c+d*d+e*e)},e.len=e.length,e.squaredLength=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return b*b+c*c+d*d+e*e},e.sqrLen=e.squaredLength,e.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=-b[3],a},e.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a[2]=1/b[2],a[3]=1/b[3],a},e.normalize=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f;return g>0&&(g=1/Math.sqrt(g),a[0]=c*g,a[1]=d*g,a[2]=e*g,a[3]=f*g),a},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},e.lerp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2],h=b[3];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a[3]=h+d*(c[3]-h),a},e.random=function(a,b){return b=b||1,a[0]=d.RANDOM(),a[1]=d.RANDOM(),a[2]=d.RANDOM(),a[3]=d.RANDOM(),e.normalize(a,a),e.scale(a,a,b),a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3];return a[0]=c[0]*d+c[4]*e+c[8]*f+c[12]*g,a[1]=c[1]*d+c[5]*e+c[9]*f+c[13]*g,a[2]=c[2]*d+c[6]*e+c[10]*f+c[14]*g,a[3]=c[3]*d+c[7]*e+c[11]*f+c[15]*g,a},e.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2],j=c[3],k=j*d+h*f-i*e,l=j*e+i*d-g*f,m=j*f+g*e-h*d,n=-g*d-h*e-i*f;return a[0]=k*j+n*-g+l*-i-m*-h,a[1]=l*j+n*-h+m*-g-k*-i,a[2]=m*j+n*-i+k*-h-l*-g,a[3]=b[3],a},e.forEach=function(){var a=e.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=4),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;h<i;h+=c)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],a[3]=b[h+3],f(a,a,g),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2],b[h+3]=a[3];return b}}(),e.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},b.exports=e},{"./common.js":17}],26:[function(a,b,c){function d(a){e.call(this),this.lens=a,this._view=f.create(),this._viewProj=f.create()}var e=a("nanogl-node"),f=a("gl-matrix/src/gl-matrix/mat4"),g=a("./perspective-lens"),h=a("./ortho-lens"),i=f.create(),j=Object.create(e.prototype);j.modelViewMatrix=function(a,b){f.multiply(a,b,this._view)},j.modelViewProjectionMatrix=function(a,b){f.multiply(a,this._viewProj,b)},j.unproject=function(a,b){f.invert(i,this._proj),vec3.transformMat4(a,b,i)},j.updateViewProjectionMatrix=function(a,b){this.lens.aspect=a/b,f.multiply(this._viewProj,this.lens.getProjection(),this._view)},j._computeWorldMatrix=function(a){e.prototype._computeWorldMatrix.call(this,a),f.invert(this._view,this._wmatrix)},d.makePerspectiveCamera=function(){return new d(new g)},d.makeOrthoCamera=function(){return new d(new h)},j.constructor=d,d.prototype=j,b.exports=d},{"./ortho-lens":27,"./perspective-lens":28,"gl-matrix/src/gl-matrix/mat4":21,"nanogl-node":30}],27:[function(a,b,c){function d(){this._near=.01,this._far=10,this._xMin=-1,this._xMax=1,this._yMin=-1,this._yMax=1,this._proj=e.create(),this._valid=!1}var e=a("gl-matrix/src/gl-matrix/mat4");d.prototype={getProjection:function(){return this._valid||this._updateProjection(),this._proj},setBound:function(a,b,c,d){this._xMin=a,this._xMax=b,this._yMin=c,this._yMax=d,this._invalidate()},set near(a){this._near!==a&&(this._near=a,this._invalidate())},get near(){return this._near},set far(a){this._far!==a&&(this._far=a,this._invalidate())},get far(){return this._far},set aspect(a){this._aspect!==a&&(this._aspect=a)},get aspect(){return this._aspect},_updateProjection:function(){e.ortho(this._proj,this._xMin,this._xMax,this._yMin,this._yMax,this._near,this._far),this._valid=!0},_invalidate:function(){this._valid=!1}},b.exports=d},{"gl-matrix/src/gl-matrix/mat4":21}],28:[function(a,b,c){function d(){this._near=.01,this._far=10,this._fov=Math.PI/3,this._vfov=0,this._hfov=0,this._aspect=1,this._fovMode=0,this._proj=e.create(),this._valid=!1}var e=a("gl-matrix/src/gl-matrix/mat4"),f=1,g=2,h=3;d.prototype={getProjection:function(){return this._valid||this._updateProjection(),this._proj},set fov(a){this.setVerticalFov(a)},get fov(){return this._fov},set near(a){this._near!==a&&(this._near=a,this._invalidate())},get near(){return this._near},set far(a){this._far!==a&&(this._far=a,this._invalidate())},get far(){return this._far},set aspect(a){this._aspect!==a&&(this._aspect=a,this._invalidate())},get aspect(){return this._aspect},setHorizontalFov:function(a){this._fov=a,this._fovMode=g,this._invalidate()},setVerticalFov:function(a){this._fov=a,this._fovMode=f,this._invalidate()},getHorizontalFov:function(){return this.getProjection(),this._hfov},getVerticalFov:function(){return this.getProjection(),this._vfov},setAutoFov:function(a){this._fov=a,this._fovMode=h,this._invalidate()},_updateProjection:function(){var a=this._fovMode,b=this._aspect;a===f||a===h&&b>1?(this._vfov=this._fov,this._hfov=2*Math.atan(Math.tan(this._fov/2)*b)):(this._hfov=this._fov,this._vfov=2*Math.atan(Math.tan(this._fov/2)/b)),e.perspective(this._proj,this._vfov,b,this._near,this._far),this._valid=!0},_invalidate:function(){this._valid=!1}},b.exports=d},{"gl-matrix/src/gl-matrix/mat4":21}],29:[function(a,b,c){function d(a,b,c,d){b[0]=a[12],b[1]=a[13],b[2]=a[14],d[0]=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]),d[1]=Math.sqrt(a[4]*a[4]+a[5]*a[5]+a[6]*a[6]),d[2]=Math.sqrt(a[8]*a[8]+a[9]*a[9]+a[10]*a[10]),g[0]=a[0]/d[0],g[1]=a[1]/d[0],g[2]=a[2]/d[0],g[3]=a[4]/d[1],g[4]=a[5]/d[1],g[5]=a[6]/d[1],g[6]=a[8]/d[2],g[7]=a[9]/d[2],g[8]=a[10]/d[2],f.fromMat3(c,g)}var e=a("gl-matrix/src/gl-matrix/mat3"),f=a("gl-matrix/src/gl-matrix/quat"),g=e.create();b.exports={decomposeMat4:d}},{"gl-matrix/src/gl-matrix/mat3":20,"gl-matrix/src/gl-matrix/quat":22}],30:[function(a,b,c){function d(){this.position=h.create(),this.rotation=i.create(),this.scale=h.fromValues(1,1,1),this._matrix=f.create(),this._wmatrix=f.create(),this._wposition=new Float32Array(this._wmatrix.buffer,48,3),this._parent=null,this._children=[],this._invalidM=!0,this._invalidW=!0}var e=a("./math"),f=a("gl-matrix/src/gl-matrix/mat4"),g=a("gl-matrix/src/gl-matrix/mat3"),h=a("gl-matrix/src/gl-matrix/vec3"),i=a("gl-matrix/src/gl-matrix/quat"),j=g.create(),k=new Float32Array(j.buffer,0,3),l=new Float32Array(j.buffer,12,3),m=new Float32Array(j.buffer,24,3);VUP=h.fromValues(0,1,0),d.prototype={rotateX:function(a){i.rotateX(this.rotation,this.rotation,a),this.invalidate()},rotateY:function(a){i.rotateY(this.rotation,this.rotation,a),this.invalidate()},rotateZ:function(a){i.rotateZ(this.rotation,this.rotation,a),this.invalidate()},set x(a){this.position[0]=a,this.invalidate()},set y(a){this.position[1]=a,this.invalidate()},set z(a){this.position[2]=a,this.invalidate()},get x(){return this.position[0]},get y(){return this.position[1]},get z(){return this.position[2]},setScale:function(a){this.scale[0]=this.scale[1]=this.scale[2]=a,this.invalidate()},lookAt:function(a){h.subtract(m,this.position,a),h.normalize(m,m),h.cross(k,VUP,m),h.normalize(k,k),h.cross(l,m,k),i.fromMat3(this.rotation,j),this.invalidate()},setMatrix:function(a){f.copy(this._matrix,a),e.decomposeMat4(a,this.position,this.rotation,this.scale),this._invalidM=!1,this._invalidW=!0},add:function(a){this._children.indexOf(a)===-1&&(null!==a._parent&&a._parent.remove(a),this._children.push(a),a._parent=this)},remove:function(a){var b=this._children.indexOf(a);b>-1&&(this._children.splice(b,1),a._parent=null)},invalidate:function(){this._invalidM=!0,this._invalidW=!0},updateMatrix:function(){this._invalidM&&(f.fromRotationTranslationScale(this._matrix,this.rotation,this.position,this.scale),this._invalidM=!1)},updateWorldMatrix:function(a){a=!!a,this.updateMatrix();var b=this._hasInvalidWorldMatrix(a);b&&this._computeWorldMatrix(a);for(var c=0;c<this._children.length;c++){var d=this._children[c];d._invalidW=d._invalidW||b,d.updateWorldMatrix(!0)}},_computeWorldMatrix:function(a){var b=this._parent;null!==b?(!a&&b._hasInvalidWorldMatrix(!1)&&(b.updateMatrix(),b._computeWorldMatrix(!1)),f.multiply(this._wmatrix,b._wmatrix,this._matrix)):f.copy(this._wmatrix,this._matrix),
this._invalidW=!1},_hasInvalidWorldMatrix:function(a){return this._invalidW||!a&&null!==this._parent&&this._parent._hasInvalidWorldMatrix(!1)}},b.exports=d},{"./math":29,"gl-matrix/src/gl-matrix/mat3":20,"gl-matrix/src/gl-matrix/mat4":21,"gl-matrix/src/gl-matrix/quat":22,"gl-matrix/src/gl-matrix/vec3":24}],31:[function(a,b,c){var d=a("raf"),e=a("right-now"),f=function(){};b.exports=function(a){var b=void 0!==a.pixelRatio?a.pixelRatio:0,c=void 0===a.hdpi||a.hdpi,g=function(a){var d=this.getContextOptions();this.gl=a.getContext("webgl",d)||a.getContext("experimental-webgl",d)||a.getContext("webgl"),this.canvas=a,this.width=0,this.height=0,this.canvasWidth=0,this.canvasHeight=0,this.pixelRatio=b,this.hdpi=c,this.frame=this._frame.bind(this),this.previousTime=e(),this._rafId=0,this._playing=!1,this.init()},h=g.prototype;return h.getContextOptions=a.getContextOptions||function(){},h.render=a.render||f,h.resize=a.resize||f,h.init=a.init||f,h.dispose=function(){this.stop()},h.play=function(){this._playing||(this._playing=!0,this.frame(),this.previousTime=e(),this._requestFrame())},h.stop=function(){d.cancel(this._rafId),this._playing=!1,this._rafId=0},h.updateSize=function(){var a=1;this.pixelRatio>0?a=this.pixelRatio:this.hdpi&&(a=window.devicePixelRatio),this.canvas.width=a*this.canvasWidth,this.canvas.height=a*this.canvasHeight,this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this.resize()},h._checkSize=function(){var a=getComputedStyle(this.canvas),b=parseInt(a.getPropertyValue("width")),c=parseInt(a.getPropertyValue("height"));return!isNaN(b)&&!isNaN(c)&&0!==b&&0!==c&&(b===this.canvasWidth&&c===this.canvasHeight||(this.canvasWidth=b,this.canvasHeight=c,this.updateSize()),!0)},h._requestFrame=function(){d.cancel(this._rafId),this._rafId=d(this.frame)},h._frame=function(){if(this._playing){var a=e(),b=(a-this.previousTime)/1e3;this.previousTime=a,(b>.2||b<1/180)&&(b=1/60),this._checkSize()&&this.render(b),this._playing&&this._requestFrame()}},g}},{raf:42,"right-now":43}],32:[function(a,b,c){!function(){function a(a){return a|(4096&a)>>>2|(2048&a)>>>2|(524288&a)>>>3|(1048576&a)>>>3|(2097152&a)>>>3}function c(a){return 0|Math.round(65535*a)}function d(a){return a/65535}function e(a){var b=(31744&a)>>10,c=1023&a;return(a>>15?-1:1)*(b?31===b?c?NaN:1/0:Math.pow(2,b-15)*(1+c/1024):6103515625e-14*(c/1024))}function f(a){h[0]=a;var b=i[0],c=b>>31<<5,d=b>>23&255;return d=d-112&112-d>>4>>27,c=(c|d)<<10,c|=b>>13&1023}function g(){this._dat=new Uint16Array(51),this._set=0}var h=new Float32Array(1),i=new Uint32Array(h.buffer),j=[1,512,1024,1024,2048,4096,4096,4,8192,2,16384,32768,256,65536,65536,65536,262144,131072,131072,131072,524288,524288,524288,2097152,1048576,1048576,1048576,128,4194304,4194304,4194304,4194304,8,16,8388608,8388608,32,64,16777216,33554432,67108864,67108864,67108864,67108864,134217728,134217728,134217728,134217728,268435456,268435456,536870912],k=935847839,l=new Uint16Array([0,32774,0,1,0,0,0,0,513,0,1029,2305,0,519,0,65535,65535,7680,7680,7680,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,15,1,0,0,0,0,0,0,0,0,c(0),c(1),f(1)]),m=function(a,b){return a.getParameter(b)};g.DAT_MASKS=j,g.encodeHalf=function(a){return f(a)},g.decodeHalf=function(a){return e(a)},g.prototype={toDefault:function(){this._dat.set(l),this._set=0|k},clone:function(){var a=new g;return a._dat.set(this._dat),a._set=this._set,a},patch:function(b,c){for(var d,e=this._dat,f=this._set,g=b._dat,h=b._set,i=c._dat,k=0,l=0;51>l;l++)d=j[l],0!==(f&d)&&((0===(h&d)||e[l]!==g[l])&&(k|=d),g[l]=e[l]);i.set(g),b._set|=f,c._set=a(k)},setupGL:function(a){var b,c=this._set,f=this._dat;if(0!==(1&c)&&(f[0]?a.enable(3042):a.disable(3042)),b=2560&c,0!==b&&(2560===b?a.blendEquationSeparate(f[1],f[4]):a.blendEquation(f[1])),b=5120&c,0!==b&&(5120===b?a.blendFuncSeparate(f[3],f[2],f[6],f[5]):a.blendFunc(f[3],f[2])),0!==(4&c)&&(f[7]?a.enable(2929):a.disable(2929)),0!==(8192&c)&&a.depthFunc(f[8]),0!==(2&c)&&(f[9]?a.enable(2884):a.disable(2884)),0!==(16384&c)&&a.cullFace(f[10]),0!==(32768&c)&&a.frontFace(f[11]),0!==(536870912&c)&&a.lineWidth(e(f[50])),0!==(256&c)&&(f[12]?a.enable(2960):a.disable(2960)),b=589824&c,0!==b&&(589824===b?(a.stencilFuncSeparate(1028,f[13],f[14],f[15]),a.stencilFuncSeparate(1029,f[20],f[21],f[22])):a.stencilFunc(f[13],f[14],f[15])),b=1179648&c,0!==b&&(1179648===b?(a.stencilOpSeparate(1028,f[17],f[18],f[19]),a.stencilOpSeparate(1029,f[24],f[25],f[26])):a.stencilOp(f[17],f[18],f[19])),b=2359296&c,0!==b&&(2359296===b?(a.stencilMaskSeparate(1028,f[16]),a.stencilMaskSeparate(1029,f[23])):a.stencilMask(f[16])),0!==(16777216&c)){var g=f[38];a.colorMask(1===(1&g),2===(2&g),4===(4&g),8===(8&g))}0!==(33554432&c)&&a.depthMask(1===f[39]),0!==(67108864&c)&&a.blendColor(e(f[40]),e(f[41]),e(f[42]),e(f[43])),0!==(128&c)&&(f[27]?a.enable(3089):a.disable(3089)),0!==(4194304&c)&&a.scissor(f[28],f[29],f[30],f[31]),0!==(134217728&c)&&a.viewport(f[44],f[45],f[46],f[47]),0!==(16&c)&&(f[33]?a.enable(32823):a.disable(32823)),0!==(8388608&c)&&a.polygonOffset(e(f[34]),e(f[35])),0!==(268435456&c)&&a.depthRange(d(f[48]),d(f[49]))},fromGL:function(a){this._set=0;var b=m(a,3042),c=m(a,2884),d=m(a,2929),e=m(a,3024),f=m(a,32823),g=m(a,3089),h=m(a,2960),i=m(a,32969),j=m(a,32968),k=m(a,32971),l=m(a,32970),n=m(a,32777),o=m(a,34877),p=m(a,2962),q=m(a,2967),r=m(a,2963),s=m(a,2968),t=m(a,2964),u=m(a,2965),v=m(a,2966),w=m(a,34816),x=m(a,36003),y=m(a,36004),z=m(a,36005),A=m(a,34817),B=m(a,34818),C=m(a,34819),D=m(a,32824),E=m(a,10752),F=m(a,3088),G=m(a,3107),H=m(a,2930),I=m(a,32773),J=m(a,2978),K=m(a,2928),L=m(a,2849);this.enableBlend(b),i!==k||j!==l?this.blendFuncSeparate(i,j,k,l):this.blendFunc(i,j),n!==o?this.blendEquationSeparate(n,o):this.blendEquation(n),this.enableStencil(h),p!==w||q!==x||r!==y?this.stencilFuncSeparate(p,q,r,w,x,y):this.stencilFunc(p,q,r),t!==A||u!==B||v!==C?this.stencilOpSeparate(t,u,v,A,B,C):this.stencilOp(t,u,v),s!==z?this.stencilMaskSeparate(s,z):this.stencilMask(s),this.depthFunc(a.getParameter(2932)),this.enableDepthTest(d),this.cullFace(a.getParameter(2885)),this.enableCullface(c),this.frontFace(a.getParameter(2886)),this.enablePolygonOffset(f),this.polygonOffset(D,E),this.enableScissor(g),this.scissor(F[0],F[1],F[2],F[3]),this.enableDither(e),this.colorMask(G[0],G[1],G[2],G[3]),this.depthMask(H),this.blendColor(I[0],I[1],I[2],I[3]),this.viewport(J[0],J[1],J[2],J[3]),this.depthRange(K[0],K[1]),this.lineWidth(L)},enableBlend:function(a){return void 0===a&&(a=!0),this._dat[0]=0|a,this._set|=1,this},blendFunc:function(a,b){return this._dat[3]=a,this._dat[2]=b,this._set=-4097&this._set|1024,this},blendFuncSeparate:function(a,b,c,d){return this._dat[3]=a,this._dat[2]=b,this._dat[6]=c,this._dat[5]=d,this._set|=5120,this},blendEquation:function(a){return this._dat[1]=a,this._set=-2049&this._set|512,this},blendEquationSeparate:function(a,b){return this._dat[1]=a,this._dat[4]=b,this._set|=2560,this},blendColor:function(a,b,c,d){return this._dat[40]=f(a),this._dat[41]=f(b),this._dat[42]=f(c),this._dat[43]=f(d),this._set|=67108864,this},depthFunc:function(a){return this._dat[8]=a,this._set|=8192,this},enableDepthTest:function(a){return void 0===a&&(a=!0),this._dat[7]=0|a,this._set|=4,this},depthRange:function(a,b){return this._dat[48]=c(a),this._dat[49]=c(b),this._set|=268435456,this},lineWidth:function(a){return this._dat[50]=f(a),this._set|=536870912,this},cullFace:function(a){return this._dat[10]=a,this._set|=16384,this},enableCullface:function(a){return void 0===a&&(a=!0),this._dat[9]=0|a,this._set|=2,this},polygonOffset:function(a,b){return this._dat[34]=f(a),this._dat[35]=f(b),this._set|=8388608,this},enablePolygonOffset:function(a){return void 0===a&&(a=!0),this._dat[33]=0|a,this._set|=16,this},enableScissor:function(a){return void 0===a&&(a=!0),this._dat[27]=0|a,this._set|=128,this},scissor:function(a,b,c,d){return this._dat[28]=a,this._dat[29]=b,this._dat[30]=c,this._dat[31]=d,this._set|=4194304,this},viewport:function(a,b,c,d){return this._dat[44]=a,this._dat[45]=b,this._dat[46]=c,this._dat[47]=d,this._set|=134217728,this},enableDither:function(a){return void 0===a&&(a=!0),this._dat[32]=0|a,this._set|=8,this},depthMask:function(a){return this._dat[39]=0|a,this._set|=33554432,this},colorMask:function(a,b,c,d){var e=0|a|(0|b)<<1|(0|c)<<2|(0|d)<<3;return this._dat[38]=e,this._set|=16777216,this},frontFace:function(a){return this._dat[11]=a,this._set|=32768,this},enableStencil:function(a){return void 0===a&&(a=!0),this._dat[12]=0|a,this._set|=256,this},stencilFunc:function(a,b,c){return this._dat[13]=a,this._dat[14]=b,this._dat[15]=c,this._set=-524289&this._set|65536,this},stencilOp:function(a,b,c){return this._dat[17]=a,this._dat[18]=b,this._dat[19]=c,this._set=-1048577&this._set|131072,this},stencilMask:function(a){return this._dat[16]=a,this._set=-2097153&this._set|262144,this},stencilFuncSeparate:function(a,b,c,d,e,f){var g=this._dat;return g[13]=a,g[14]=b,g[15]=c,g[20]=d,g[21]=e,g[22]=f,this._set|=589824,this},stencilOpSeparate:function(a,b,c,d,e,f){var g=this._dat;return g[17]=a,g[18]=b,g[19]=c,g[24]=d,g[25]=e,g[26]=f,this._set|=1179648,this},stencilMaskSeparate:function(a,b){return this._dat[16]=a,this._dat[23]=b,this._set|=2359296,this}},b.exports=g}()},{}],33:[function(a,b,c){!function(){function c(){this._stack=new Uint32Array(816),this._sets=new Uint32Array(16),this._tmpDat=new Uint32Array(51),this._size=16,this._ptr=0,this._headPos=0,this._wcfg=new d}var d=a("./config"),e=d.DAT_MASKS;c.prototype={initFromGL:function(a){this._ptr=0,this._wcfg.fromGL(a),this._sets[0]=0,this._stack.set(this._wcfg._dat)},push:function(a){var b,c,d,f,g,h,i,j=this._ptr,k=this._sets[j++],l=a._set;for(j==this._size&&this._grow(),k|=l,this._sets[j]=k,this._ptr=j,b=51*j,c=this._stack,d=a._dat,f=this._tmpDat,g=0;51>g;g++)h=e[g],i=0!==(l&h)?d[g]:c[b+g-51],f[g]=i;c.set(f,b)},pop:function(){var a=--this._ptr;this._headPos>a&&(this._sets[a]|=this._sets[a+1],this._headPos=a)},flush:function(){for(;this._ptr>0;)this.pop()},commit:function(a){var b=this._ptr;this.copyConfig(b,a),this._headPos=b,this._sets[b-1]|=this._sets[b],this._sets[b]=0},patch:function(a,b){this.copyConfig(this._ptr,this._wcfg),this._wcfg.patch(a,b)},copyConfig:function(a,b){var c=new Uint32Array(this._stack.buffer,204*a,51);b._dat.set(c),b._set=this._sets[a]},_grow:function(){var a=this._size<<1,b=new Uint32Array(51*a),c=new Uint32Array(a);b.set(this._stack,0),c.set(this._sets,0),this._stack=b,this._sets=c,this._size=a}},b.exports=c}()},{"./config":32}],34:[function(a,b,c){function d(a){this.gl=a,this.cfgStack=new g,this.cfgStack.initFromGL(a),this._validCfg=!1}function e(a){f.call(this),this.state=a}var f=a("./config"),g=a("./stack"),h=new f;d.prototype={push:function(a){this.cfgStack.push(a),this._validCfg=!1},pop:function(){this.cfgStack.pop(),this._validCfg=!1},apply:function(){this._validCfg||(this.cfgStack.commit(h),h.setupGL(this.gl),this._validCfg=!0)},now:function(a){this.push(a),this.apply(),this.pop()},config:function(){return new e(this)}},e.prototype=Object.create(f.prototype),e.prototype.constructor=e,e.prototype.apply=function(){this.state.now(this)},d.config=function(){return new f},b.exports=d},{"./config":32,"./stack":33}],35:[function(a,b,c){function d(){if("undefined"!=typeof g&&g.defer)return g.defer();var a={resolve:null,reject:null};return a.promise=new g(function(b,c){a.resolve=b,a.reject=c}.bind(a)),Object.freeze(a),a}function e(a){var b=h[a._uid];b&&(b.img.onload=b.img.onerror=null,b.img.src="",b.defer.reject(a)),delete h[a._uid]}function f(a){return a.fromImage(h[a._uid].img),e(a),a}var g=a("when/es6-shim/Promise.browserify-es6"),h={},i={};i.load=function(a,b){e(a);var c=d(),g=new Image;return g.onload=function(){c.resolve(a)},g.onerror=function(){c.reject(a),e(a)},g.crossOrigin="anonymous",g.src=b,h[a._uid]={texture:a,img:g,defer:c},c.promise.then(f),c.promise},b.exports=i},{"when/es6-shim/Promise.browserify-es6":44}],36:[function(a,b,c){function d(a,b,c){this.gl=a,this.usage=c||a.STATIC_DRAW,this.buffer=a.createBuffer(),this.attribs=[],this.stride=0,this.byteLength=0,this.length=0,b&&this.data(b)}var e=a("./bufferutils"),f=34962;d.prototype={bind:function(){this.gl.bindBuffer(f,this.buffer)},attrib:function(a,b,c,d){return this.attribs.push({name:a,type:0|c,size:0|b,normalize:!!d,offset:this.stride}),this.stride+=e.getComponentSize(c)*b,this._computeLength(),this},data:function(a){var b=this.gl;b.bindBuffer(f,this.buffer),b.bufferData(f,a,this.usage),b.bindBuffer(f,null),this.byteLength=void 0===a.byteLength?a:a.byteLength,this._computeLength()},subData:function(a,b){var c=this.gl;c.bindBuffer(f,this.buffer),c.bufferSubData(f,b,a),c.bindBuffer(f,null)},attribPointer:function(a){var b=this.gl;b.bindBuffer(f,this.buffer);for(var c=0;c<this.attribs.length;c++){var d=this.attribs[c];if(void 0!==a[d.name]){var e=a[d.name]();b.enableVertexAttribArray(e),b.vertexAttribPointer(e,d.size,d.type,d.normalize,this.stride,d.offset)}}},draw:function(a,b,c){b=void 0===b?this.length:b,this.gl.drawArrays(a,c,0|b)},dispose:function(){this.gl.deleteBuffer(this.buffer),this.buffer=null,this.gl=null},_computeLength:function(){this.stride>0&&(this.length=this.byteLength/this.stride)}},e.Drawable(d.prototype),b.exports=d},{"./bufferutils":37}],37:[function(a,b,c){b.exports={getComponentSize:function(a){switch(a){case 5120:case 5121:return 1;case 5122:case 5123:return 2;case 5124:case 5125:case 5126:return 4;default:return 0}},Drawable:function(a){a.drawPoints=function(a,b){this.draw(0,a,b)},a.drawLines=function(a,b){this.draw(1,a,b)},a.drawLineLoop=function(a,b){this.draw(2,a,b)},a.drawLineStrip=function(a,b){this.draw(3,a,b)},a.drawTriangles=function(a,b){this.draw(4,a,b)},a.drawTriangleStrip=function(a,b){this.draw(5,a,b)},a.drawTriangleFan=function(a,b){this.draw(6,a,b)}}}},{}],38:[function(a,b,c){function d(a,b,c,d){this.gl=a,this.program=a.createProgram(),this.vShader=a.createShader(a.VERTEX_SHADER),this.fShader=a.createShader(a.FRAGMENT_SHADER),this.dyns=[],this.ready=!1,a.attachShader(this.program,this.vShader),a.attachShader(this.program,this.fShader),void 0!==b&&void 0!==c&&this.compile(b,c,d)}function e(a){console.warn(a)}function f(a,b){return o[String(b+1).length]+(b+1)+": "+a}function g(a){return a.split("\n").map(f).join("\n")}function h(a,b,c){return a.shaderSource(b,c),a.compileShader(b),!(d.debug&&!a.getShaderParameter(b,a.COMPILE_STATUS))||(e(a.getShaderInfoLog(b)),e(g(c)),!1)}function i(a){return a=String(a),"uniform"+p[a]}function j(a,b,c,d){switch(a){case c.FLOAT_MAT2:case c.FLOAT_MAT3:case c.FLOAT_MAT4:return l(a,b,c,d);case c.SAMPLER_2D:case c.SAMPLER_CUBE:return m(a,b,c,d);default:return k(a,b,c,d)}}function k(a,b,c,d){var e=i(a);return function(){return 1===arguments.length&&void 0!==arguments[0].length?c[e+"v"](b,arguments[0]):arguments.length>0&&c[e].apply(c,Array.prototype.concat.apply(b,arguments)),b}}function l(a,b,c,d){var e=i(a);return function(){if(arguments.length>0&&void 0!==arguments[0].length){var a=arguments.length>1&&!!arguments[1];c[e+"v"](b,a,arguments[0])}return b}}function m(a,b,c,d){var e=d.texIndex++;return function(){return 1===arguments.length&&(void 0!==arguments[0].bind?(arguments[0].bind(e),c.uniform1i(b,e)):c.uniform1i(b,arguments[0])),b}}function n(a){return function(){return a}}d.debug=!0,d.prototype={use:function(){this.ready||this._grabParameters(),this.gl.useProgram(this.program)},compile:function(a,b,c){this.ready=!1,c=(c||"")+"\n";var f=this.gl;if(!h(f,this.fShader,c+b)||!h(f,this.vShader,c+a))return!1;if(f.linkProgram(this.program),d.debug&&!f.getProgramParameter(this.program,f.LINK_STATUS))return e(f.getProgramInfoLog(this.program)),!1;for(;this.dyns.length>0;)delete this[this.dyns.pop()];return!0},dispose:function(){null!==this.gl&&(this.gl.deleteProgram(this.program),this.gl.deleteShader(this.fShader),this.gl.deleteShader(this.vShader),this.gl=null)},_grabParameters:function(){for(var a=this.gl,b=this.program,c=a.getProgramParameter(b,a.ACTIVE_UNIFORMS),d={texIndex:0},e=0;e<c;++e){var f=a.getActiveUniform(b,e);if(null!==f){var g=f.name,h=g.indexOf("[");h>=0&&(g=g.substring(0,h));var i=a.getUniformLocation(b,f.name);this[g]=j(f.type,i,a,d),this.dyns.push(g)}else a.getError()}for(var k=a.getProgramParameter(b,a.ACTIVE_ATTRIBUTES),l=0;l<k;++l){var m=a.getActiveAttrib(b,l).name,o=a.getAttribLocation(b,m);this[m]=n(o),this.dyns.push(m)}this.ready=!0}},d.prototype.bind=d.prototype.use;var o=["","   ","  "," ",""],p={};p[5126]="1f",p[35664]="2f",p[35665]="3f",p[35666]="4f",p[35670]=p[5124]=p[35678]=p[35680]="1i",p[35671]=p[35667]="2i",p[35672]=p[35668]="3i",p[35673]=p[35669]="4i",p[35674]="Matrix2f",p[35675]="Matrix3f",p[35676]="Matrix4f",b.exports=d},{}],39:[function(a,b,c){function d(a,b,c){return 9728|+a|+b<<8|+(b&&c)<<1}function e(a,b){this._uid=f++,this.gl=a,this.id=this.gl.createTexture(),this.width=0,this.height=0,this.format=b||a.RGB,this.type=a.UNSIGNED_BYTE,a.bindTexture(g,this.id),this.setFilter(!0)}var f=0,g=3553;e.prototype={fromImage:function(a){var b=this.gl;this.width=a.width,this.height=a.height,b.bindTexture(g,this.id),b.texImage2D(g,0,this.format,this.format,this.type,a)},fromData:function(a,b,c,d){var e=this.gl;this.width=a,this.height=b,c=c||null,this.type=d||e.UNSIGNED_BYTE,e.bindTexture(g,this.id),e.texImage2D(g,0,this.format,a,b,0,this.format,this.type,c)},bind:function(a){var b=this.gl;void 0!==a&&b.activeTexture(b.TEXTURE0+(0|a)),b.bindTexture(g,this.id)},dispose:function(){this.gl.deleteTexture(this.id),this.id=null,this.gl=null},setFilter:function(a,b,c){var e=this.gl,f=d(!!a,!!b,!!c);e.texParameteri(g,e.TEXTURE_MAG_FILTER,d(!!a,!1,!1)),e.texParameteri(g,e.TEXTURE_MIN_FILTER,f)},repeat:function(){this.wrap(this.gl.REPEAT)},clamp:function(){this.wrap(this.gl.CLAMP_TO_EDGE)},mirror:function(){this.wrap(this.gl.MIRRORED_REPEAT)},wrap:function(a){var b=this.gl;b.texParameteri(g,b.TEXTURE_WRAP_S,a),b.texParameteri(g,b.TEXTURE_WRAP_T,a)}},b.exports=e},{}],40:[function(a,b,c){(function(a){(function(){var c,d,e,f,g,h;"undefined"!=typeof performance&&null!==performance&&performance.now?b.exports=function(){return performance.now()}:"undefined"!=typeof a&&null!==a&&a.hrtime?(b.exports=function(){return(c()-g)/1e6},d=a.hrtime,c=function(){var a;return a=d(),1e9*a[0]+a[1]},f=c(),h=1e9*a.uptime(),g=f-h):Date.now?(b.exports=function(){return Date.now()-e},e=Date.now()):(b.exports=function(){return(new Date).getTime()-e},e=(new Date).getTime())}).call(this)}).call(this,a("_process"))},{_process:41}],41:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.prependListener=k,n.prependOnceListener=k,n.listeners=function(a){return[]},n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],42:[function(a,b,c){(function(c){for(var d=a("performance-now"),e="undefined"==typeof window?c:window,f=["moz","webkit"],g="AnimationFrame",h=e["request"+g],i=e["cancel"+g]||e["cancelRequest"+g],j=0;!h&&j<f.length;j++)h=e[f[j]+"Request"+g],i=e[f[j]+"Cancel"+g]||e[f[j]+"CancelRequest"+g];if(!h||!i){var k=0,l=0,m=[],n=1e3/60;h=function(a){if(0===m.length){var b=d(),c=Math.max(0,n-(b-k));k=c+b,setTimeout(function(){var a=m.slice(0);m.length=0;for(var b=0;b<a.length;b++)if(!a[b].cancelled)try{a[b].callback(k)}catch(c){setTimeout(function(){throw c},0)}},Math.round(c))}return m.push({handle:++l,callback:a,cancelled:!1}),l},i=function(a){for(var b=0;b<m.length;b++)m[b].handle===a&&(m[b].cancelled=!0)}}b.exports=function(a){return h.call(e,a)},b.exports.cancel=function(){i.apply(e,arguments)},b.exports.polyfill=function(a){a||(a=e),a.requestAnimationFrame=h,a.cancelAnimationFrame=i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"performance-now":40}],43:[function(a,b,c){(function(a){b.exports=a.performance&&a.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],44:[function(a,b,c){(function(c){var d=a("../lib/decorators/unhandledRejection"),e=d(a("../lib/Promise"));b.exports="undefined"!=typeof c?c.Promise=e:"undefined"!=typeof self?self.Promise=e:e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../lib/Promise":45,"../lib/decorators/unhandledRejection":56}],45:[function(a,b,c){!function(a){"use strict";a(function(a){var b=a("./makePromise"),c=a("./Scheduler"),d=a("./env").asap;return b({scheduler:new c(d)})})}("function"==typeof define&&define.amd?define:function(c){b.exports=c(a)})},{"./Scheduler":46,"./env":58,"./makePromise":60}],46:[function(a,b,c){!function(a){"use strict";a(function(){function a(a){this._async=a,this._running=!1,this._queue=this,this._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var b=this;this.drain=function(){b._drain()}}return a.prototype.enqueue=function(a){this._queue[this._queueLen++]=a,this.run()},a.prototype.afterQueue=function(a){this._afterQueue[this._afterQueueLen++]=a,this.run()},a.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},a.prototype._drain=function(){for(var a=0;a<this._queueLen;++a)this._queue[a].run(),this._queue[a]=void 0;for(this._queueLen=0,this._running=!1,a=0;a<this._afterQueueLen;++a)this._afterQueue[a].run(),this._afterQueue[a]=void 0;this._afterQueueLen=0},a})}("function"==typeof define&&define.amd?define:function(a){b.exports=a()})},{}],47:[function(a,b,c){!function(a){"use strict";a(function(){function a(b){Error.call(this),this.message=b,this.name=a.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,a)}return a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a})}("function"==typeof define&&define.amd?define:function(a){b.exports=a()})},{}],48:[function(a,b,c){!function(a){"use strict";a(function(){function a(a,c){function d(b,d,f){var g=a._defer(),h=f.length,i=new Array(h);return e({f:b,thisArg:d,args:f,params:i,i:h-1,call:c},g._handler),g}function e(b,d){if(b.i<0)return c(b.f,b.thisArg,b.params,d);var e=a._handler(b.args[b.i]);e.fold(f,b,void 0,d)}function f(a,b,c){a.params[a.i]=b,a.i-=1,e(a,c)}return arguments.length<2&&(c=b),d}function b(a,b,c,d){try{d.resolve(a.apply(b,c))}catch(e){d.reject(e)}}return a.tryCatchResolve=b,a})}("function"==typeof define&&define.amd?define:function(a){b.exports=a()})},{}],49:[function(a,b,c){!function(a){"use strict";a(function(a){var b=a("../state"),c=a("../apply");return function(a){function d(b){function c(a){k=null,this.resolve(a)}function d(a){this.resolved||(k.push(a),0===--j&&this.reject(k))}for(var e,f,g=a._defer(),h=g._handler,i=b.length>>>0,j=i,k=[],l=0;l<i;++l)if(f=b[l],void 0!==f||l in b){if(e=a._handler(f),e.state()>0){h.become(e),a._visitRemaining(b,l,e);break}e.visit(h,c,d)}else--j;return 0===j&&h.reject(new RangeError("any(): array must not be empty")),g}function e(b,c){function d(a){this.resolved||(k.push(a),0===--n&&(l=null,this.resolve(k)))}function e(a){this.resolved||(l.push(a),0===--f&&(k=null,this.reject(l)))}var f,g,h,i=a._defer(),j=i._handler,k=[],l=[],m=b.length>>>0,n=0;for(h=0;h<m;++h)g=b[h],(void 0!==g||h in b)&&++n;for(c=Math.max(c,0),f=n-c+1,n=Math.min(c,n),c>n?j.reject(new RangeError("some(): array must contain at least "+c+" item(s), but had "+n)):0===n&&j.resolve(k),h=0;h<m;++h)g=b[h],(void 0!==g||h in b)&&a._handler(g).visit(j,d,e,j.notify);return i}function f(b,c){return a._traverse(c,b)}function g(b,c){var d=s.call(b);return a._traverse(c,d).then(function(a){return h(d,a)})}function h(b,c){for(var d=c.length,e=new Array(d),f=0,g=0;f<d;++f)c[f]&&(e[g++]=a._handler(b[f]).value);return e.length=g,e}function i(a){return p(a.map(j))}function j(c){var d=a._handler(c);return 0===d.state()?o(c).then(b.fulfilled,b.rejected):(d._unreport(),b.inspect(d))}function k(a,b){return arguments.length>2?q.call(a,m(b),arguments[2]):q.call(a,m(b))}function l(a,b){return arguments.length>2?r.call(a,m(b),arguments[2]):r.call(a,m(b))}function m(a){return function(b,c,d){return n(a,void 0,[b,c,d])}}var n=c(a),o=a.resolve,p=a.all,q=Array.prototype.reduce,r=Array.prototype.reduceRight,s=Array.prototype.slice;return a.any=d,a.some=e,a.settle=i,a.map=f,a.filter=g,a.reduce=k,a.reduceRight=l,a.prototype.spread=function(a){return this.then(p).then(function(b){return a.apply(this,b)})},a}})}("function"==typeof define&&define.amd?define:function(c){b.exports=c(a)})},{"../apply":48,"../state":61}],50:[function(a,b,c){!function(a){"use strict";a(function(){function a(){throw new TypeError("catch predicate must be a function")}function b(a,b){return c(b)?a instanceof b:b(a)}function c(a){return a===Error||null!=a&&a.prototype instanceof Error}function d(a){return("object"==typeof a||"function"==typeof a)&&null!==a}function e(a){return a}return function(c){function f(a,c){return function(d){return b(d,c)?a.call(this,d):j(d)}}function g(a,b,c,e){var f=a.call(b);return d(f)?h(f,c,e):c(e)}function h(a,b,c){return i(a).then(function(){return b(c)})}var i=c.resolve,j=c.reject,k=c.prototype["catch"];return c.prototype.done=function(a,b){this._handler.visit(this._handler.receiver,a,b)},c.prototype["catch"]=c.prototype.otherwise=function(b){return arguments.length<2?k.call(this,b):"function"!=typeof b?this.ensure(a):k.call(this,f(arguments[1],b))},c.prototype["finally"]=c.prototype.ensure=function(a){return"function"!=typeof a?this:this.then(function(b){return g(a,this,e,b)},function(b){return g(a,this,j,b)})},c.prototype["else"]=c.prototype.orElse=function(a){return this.then(void 0,function(){return a})},c.prototype["yield"]=function(a){return this.then(function(){return a})},c.prototype.tap=function(a){return this.then(a)["yield"](this)},c}})}("function"==typeof define&&define.amd?define:function(a){b.exports=a()})},{}],51:[function(a,b,c){!function(a){"use strict";a(function(){return function(a){return a.prototype.fold=function(b,c){var d=this._beget();return this._handler.fold(function(c,d,e){a._handler(c).fold(function(a,c,d){d.resolve(b.call(this,c,a))},d,this,e)},c,d._handler.receiver,d._handler),d},a}})}("function"==typeof define&&define.amd?define:function(a){b.exports=a()})},{}],52:[function(a,b,c){!function(a){"use strict";a(function(a){var b=a("../state").inspect;return function(a){return a.prototype.inspect=function(){return b(a._handler(this))},a}})}("function"==typeof define&&define.amd?define:function(c){b.exports=c(a)})},{"../state":61}],53:[function(a,b,c){!function(a){"use strict";a(function(){return function(a){function b(a,b,d,e){return c(function(b){return[b,a(b)]},b,d,e)}function c(a,b,e,f){function g(f,g){return d(e(f)).then(function(){return c(a,b,e,g)})}return d(f).then(function(c){return d(b(c)).then(function(b){return b?c:d(a(c)).spread(g)})})}var d=a.resolve;return a.iterate=b,a.unfold=c,a}})}("function"==typeof define&&define.amd?define:function(a){b.exports=a()})},{}],54:[function(a,b,c){!function(a){"use strict";a(function(){return function(a){return a.prototype.progress=function(a){return this.then(void 0,void 0,a)},a}})}("function"==typeof define&&define.amd?define:function(a){b.exports=a()})},{}],55:[function(a,b,c){!function(a){"use strict";a(function(a){function b(a,b,d,e){return c.setTimer(function(){a(d,e,b)},b)}var c=a("../env"),d=a("../TimeoutError");return function(a){function e(a,c,d){b(f,a,c,d)}function f(a,b){b.resolve(a)}function g(a,b,c){var e="undefined"==typeof a?new d("timed out after "+c+"ms"):a;b.reject(e)}return a.prototype.delay=function(a){var b=this._beget();return this._handler.fold(e,a,void 0,b._handler),b},a.prototype.timeout=function(a,d){var e=this._beget(),f=e._handler,h=b(g,a,d,e._handler);return this._handler.visit(f,function(a){c.clearTimer(h),this.resolve(a)},function(a){c.clearTimer(h),this.reject(a)},f.notify),e},a}})}("function"==typeof define&&define.amd?define:function(c){b.exports=c(a)})},{"../TimeoutError":47,"../env":58}],56:[function(a,b,c){!function(a){"use strict";a(function(a){function b(a){throw a}function c(){}var d=a("../env").setTimer,e=a("../format");return function(a){function f(a){a.handled||(n.push(a),k("Potentially unhandled rejection ["+a.id+"] "+e.formatError(a.value)))}function g(a){var b=n.indexOf(a);b>=0&&(n.splice(b,1),l("Handled previous rejection ["+a.id+"] "+e.formatObject(a.value)))}function h(a,b){m.push(a,b),null===o&&(o=d(i,0))}function i(){for(o=null;m.length>0;)m.shift()(m.shift())}var j,k=c,l=c;"undefined"!=typeof console&&(j=console,k="undefined"!=typeof j.error?function(a){j.error(a)}:function(a){j.log(a)},l="undefined"!=typeof j.info?function(a){j.info(a)}:function(a){j.log(a)}),a.onPotentiallyUnhandledRejection=function(a){h(f,a)},a.onPotentiallyUnhandledRejectionHandled=function(a){h(g,a)},a.onFatalRejection=function(a){h(b,a.value)};var m=[],n=[],o=null;return a}})}("function"==typeof define&&define.amd?define:function(c){b.exports=c(a)})},{"../env":58,"../format":59}],57:[function(a,b,c){!function(a){"use strict";a(function(){return function(a){return a.prototype["with"]=a.prototype.withThis=function(a){var b=this._beget(),c=b._handler;return c.receiver=a,this._handler.chain(c,a),b},a}})}("function"==typeof define&&define.amd?define:function(a){b.exports=a()})},{}],58:[function(a,b,c){(function(c){!function(a){"use strict";a(function(a){function b(){return"undefined"!=typeof c&&"[object process]"===Object.prototype.toString.call(c)}function d(){return"function"==typeof MutationObserver&&MutationObserver||"function"==typeof WebKitMutationObserver&&WebKitMutationObserver}function e(a){function b(){var a=c;c=void 0,a()}var c,d=document.createTextNode(""),e=new a(b);e.observe(d,{characterData:!0});var f=0;return function(a){c=a,d.data=f^=1}}var f,g="undefined"!=typeof setTimeout&&setTimeout,h=function(a,b){return setTimeout(a,b)},i=function(a){return clearTimeout(a)},j=function(a){return g(a,0)};if(b())j=function(a){return c.nextTick(a)};else if(f=d())j=e(f);else if(!g){var k=a,l=k("vertx");h=function(a,b){return l.setTimer(b,a)},i=l.cancelTimer,j=l.runOnLoop||l.runOnContext}return{setTimer:h,clearTimer:i,asap:j}})}("function"==typeof define&&define.amd?define:function(c){b.exports=c(a)})}).call(this,a("_process"))},{_process:41}],59:[function(a,b,c){!function(a){"use strict";a(function(){function a(a){var c="object"==typeof a&&null!==a&&(a.stack||a.message)?a.stack||a.message:b(a);return a instanceof Error?c:c+" (WARNING: non-Error used)"}function b(a){var b=String(a);return"[object Object]"===b&&"undefined"!=typeof JSON&&(b=c(a,b)),b}function c(a,b){try{return JSON.stringify(a);
}catch(c){return b}}return{formatError:a,formatObject:b,tryStringify:c}})}("function"==typeof define&&define.amd?define:function(a){b.exports=a()})},{}],60:[function(a,b,c){(function(a){!function(b){"use strict";b(function(){return function(b){function c(a,b){this._handler=a===u?b:d(a)}function d(a){function b(a){e.resolve(a)}function c(a){e.reject(a)}function d(a){e.notify(a)}var e=new w;try{a(b,c,d)}catch(f){c(f)}return e}function e(a){return J(a)?a:new c(u,new x(r(a)))}function f(a){return new c(u,new x(new A(a)))}function g(){return aa}function h(){return new c(u,new w)}function i(a,b){var c=new w(a.receiver,a.join().context);return new b(u,c)}function j(a){return l(T,null,a)}function k(a,b){return l(O,a,b)}function l(a,b,d){function e(c,e,g){g.resolved||m(d,f,c,a(b,e,c),g)}function f(a,b,c){k[a]=b,0===--j&&c.become(new z(k))}for(var g,h="function"==typeof b?e:f,i=new w,j=d.length>>>0,k=new Array(j),l=0;l<d.length&&!i.resolved;++l)g=d[l],void 0!==g||l in d?m(d,h,l,g,i):--j;return 0===j&&i.become(new z(k)),new c(u,i)}function m(a,b,c,d,e){if(K(d)){var f=s(d),g=f.state();0===g?f.fold(b,c,void 0,e):g>0?b(c,f.value,e):(e.become(f),n(a,c+1,f))}else b(c,d,e)}function n(a,b,c){for(var d=b;d<a.length;++d)o(r(a[d]),c)}function o(a,b){if(a!==b){var c=a.state();0===c?a.visit(a,void 0,a._unreport):c<0&&a._unreport()}}function p(a){return"object"!=typeof a||null===a?f(new TypeError("non-iterable passed to race()")):0===a.length?g():1===a.length?e(a[0]):q(a)}function q(a){var b,d,e,f=new w;for(b=0;b<a.length;++b)if(d=a[b],void 0!==d||b in a){if(e=r(d),0!==e.state()){f.become(e),n(a,b+1,e);break}e.visit(f,f.resolve,f.reject)}return new c(u,f)}function r(a){return J(a)?a._handler.join():K(a)?t(a):new z(a)}function s(a){return J(a)?a._handler.join():t(a)}function t(a){try{var b=a.then;return"function"==typeof b?new y(b,a):new z(a)}catch(c){return new A(c)}}function u(){}function v(){}function w(a,b){c.createContext(this,b),this.consumers=void 0,this.receiver=a,this.handler=void 0,this.resolved=!1}function x(a){this.handler=a}function y(a,b){w.call(this),W.enqueue(new G(a,b,this))}function z(a){c.createContext(this),this.value=a}function A(a){c.createContext(this),this.id=++$,this.value=a,this.handled=!1,this.reported=!1,this._report()}function B(a,b){this.rejection=a,this.context=b}function C(a){this.rejection=a}function D(){return new A(new TypeError("Promise cycle"))}function E(a,b){this.continuation=a,this.handler=b}function F(a,b){this.handler=b,this.value=a}function G(a,b,c){this._then=a,this.thenable=b,this.resolver=c}function H(a,b,c,d,e){try{a.call(b,c,d,e)}catch(f){d(f)}}function I(a,b,c,d){this.f=a,this.z=b,this.c=c,this.to=d,this.resolver=Z,this.receiver=this}function J(a){return a instanceof c}function K(a){return("object"==typeof a||"function"==typeof a)&&null!==a}function L(a,b,d,e){return"function"!=typeof a?e.become(b):(c.enterContext(b),P(a,b.value,d,e),void c.exitContext())}function M(a,b,d,e,f){return"function"!=typeof a?f.become(d):(c.enterContext(d),Q(a,b,d.value,e,f),void c.exitContext())}function N(a,b,d,e,f){return"function"!=typeof a?f.notify(b):(c.enterContext(d),R(a,b,e,f),void c.exitContext())}function O(a,b,c){try{return a(b,c)}catch(d){return f(d)}}function P(a,b,c,d){try{d.become(r(a.call(c,b)))}catch(e){d.become(new A(e))}}function Q(a,b,c,d,e){try{a.call(d,b,c,e)}catch(f){e.become(new A(f))}}function R(a,b,c,d){try{d.notify(a.call(c,b))}catch(e){d.notify(e)}}function S(a,b){b.prototype=Y(a.prototype),b.prototype.constructor=b}function T(a,b){return b}function U(){}function V(){return"undefined"!=typeof a&&null!==a&&"function"==typeof a.emit?function(b,c){return"unhandledRejection"===b?a.emit(b,c.value,c):a.emit(b,c)}:"undefined"!=typeof self&&"function"==typeof CustomEvent?function(a,b,c){var d=!1;try{var e=new c("unhandledRejection");d=e instanceof c}catch(f){}return d?function(a,d){var e=new c(a,{detail:{reason:d.value,key:d},bubbles:!1,cancelable:!0});return!b.dispatchEvent(e)}:a}(U,self,CustomEvent):U}var W=b.scheduler,X=V(),Y=Object.create||function(a){function b(){}return b.prototype=a,new b};c.resolve=e,c.reject=f,c.never=g,c._defer=h,c._handler=r,c.prototype.then=function(a,b,c){var d=this._handler,e=d.join().state();if("function"!=typeof a&&e>0||"function"!=typeof b&&e<0)return new this.constructor(u,d);var f=this._beget(),g=f._handler;return d.chain(g,d.receiver,a,b,c),f},c.prototype["catch"]=function(a){return this.then(void 0,a)},c.prototype._beget=function(){return i(this._handler,this.constructor)},c.all=j,c.race=p,c._traverse=k,c._visitRemaining=n,u.prototype.when=u.prototype.become=u.prototype.notify=u.prototype.fail=u.prototype._unreport=u.prototype._report=U,u.prototype._state=0,u.prototype.state=function(){return this._state},u.prototype.join=function(){for(var a=this;void 0!==a.handler;)a=a.handler;return a},u.prototype.chain=function(a,b,c,d,e){this.when({resolver:a,receiver:b,fulfilled:c,rejected:d,progress:e})},u.prototype.visit=function(a,b,c,d){this.chain(Z,a,b,c,d)},u.prototype.fold=function(a,b,c,d){this.when(new I(a,b,c,d))},S(u,v),v.prototype.become=function(a){a.fail()};var Z=new v;S(u,w),w.prototype._state=0,w.prototype.resolve=function(a){this.become(r(a))},w.prototype.reject=function(a){this.resolved||this.become(new A(a))},w.prototype.join=function(){if(!this.resolved)return this;for(var a=this;void 0!==a.handler;)if(a=a.handler,a===this)return this.handler=D();return a},w.prototype.run=function(){var a=this.consumers,b=this.handler;this.handler=this.handler.join(),this.consumers=void 0;for(var c=0;c<a.length;++c)b.when(a[c])},w.prototype.become=function(a){this.resolved||(this.resolved=!0,this.handler=a,void 0!==this.consumers&&W.enqueue(this),void 0!==this.context&&a._report(this.context))},w.prototype.when=function(a){this.resolved?W.enqueue(new E(a,this.handler)):void 0===this.consumers?this.consumers=[a]:this.consumers.push(a)},w.prototype.notify=function(a){this.resolved||W.enqueue(new F(a,this))},w.prototype.fail=function(a){var b="undefined"==typeof a?this.context:a;this.resolved&&this.handler.join().fail(b)},w.prototype._report=function(a){this.resolved&&this.handler.join()._report(a)},w.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},S(u,x),x.prototype.when=function(a){W.enqueue(new E(a,this))},x.prototype._report=function(a){this.join()._report(a)},x.prototype._unreport=function(){this.join()._unreport()},S(w,y),S(u,z),z.prototype._state=1,z.prototype.fold=function(a,b,c,d){M(a,b,this,c,d)},z.prototype.when=function(a){L(a.fulfilled,this,a.receiver,a.resolver)};var $=0;S(u,A),A.prototype._state=-1,A.prototype.fold=function(a,b,c,d){d.become(this)},A.prototype.when=function(a){"function"==typeof a.rejected&&this._unreport(),L(a.rejected,this,a.receiver,a.resolver)},A.prototype._report=function(a){W.afterQueue(new B(this,a))},A.prototype._unreport=function(){this.handled||(this.handled=!0,W.afterQueue(new C(this)))},A.prototype.fail=function(a){this.reported=!0,X("unhandledRejection",this),c.onFatalRejection(this,void 0===a?this.context:a)},B.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=!0,X("unhandledRejection",this.rejection)||c.onPotentiallyUnhandledRejection(this.rejection,this.context))},C.prototype.run=function(){this.rejection.reported&&(X("rejectionHandled",this.rejection)||c.onPotentiallyUnhandledRejectionHandled(this.rejection))},c.createContext=c.enterContext=c.exitContext=c.onPotentiallyUnhandledRejection=c.onPotentiallyUnhandledRejectionHandled=c.onFatalRejection=U;var _=new u,aa=new c(u,_);return E.prototype.run=function(){this.handler.join().when(this.continuation)},F.prototype.run=function(){var a=this.handler.consumers;if(void 0!==a)for(var b,c=0;c<a.length;++c)b=a[c],N(b.progress,this.value,this.handler,b.receiver,b.resolver)},G.prototype.run=function(){function a(a){d.resolve(a)}function b(a){d.reject(a)}function c(a){d.notify(a)}var d=this.resolver;H(this._then,this.thenable,a,b,c)},I.prototype.fulfilled=function(a){this.f.call(this.c,this.z,a,this.to)},I.prototype.rejected=function(a){this.to.reject(a)},I.prototype.progress=function(a){this.to.notify(a)},c}})}("function"==typeof define&&define.amd?define:function(a){b.exports=a()})}).call(this,a("_process"))},{_process:41}],61:[function(a,b,c){!function(a){"use strict";a(function(){function a(){return{state:"pending"}}function b(a){return{state:"rejected",reason:a}}function c(a){return{state:"fulfilled",value:a}}function d(d){var e=d.state();return 0===e?a():e>0?c(d.value):b(d.value)}return{pending:a,fulfilled:c,rejected:b,inspect:d}})}("function"==typeof define&&define.amd?define:function(a){b.exports=a()})},{}],62:[function(a,b,c){!function(a){"use strict";a(function(a){function b(a,b,c,d){var e=x.resolve(a);return arguments.length<2?e:e.then(b,c,d)}function c(a){return new x(a)}function d(a){return function(){for(var b=0,c=arguments.length,d=new Array(c);b<c;++b)d[b]=arguments[b];return y(a,this,d)}}function e(a){for(var b=0,c=arguments.length-1,d=new Array(c);b<c;++b)d[b]=arguments[b+1];return y(a,this,d)}function f(){return new g}function g(){function a(a){d._handler.resolve(a)}function b(a){d._handler.reject(a)}function c(a){d._handler.notify(a)}var d=x._defer();this.promise=d,this.resolve=a,this.reject=b,this.notify=c,this.resolver={resolve:a,reject:b,notify:c}}function h(a){return a&&"function"==typeof a.then}function i(){return x.all(arguments)}function j(a){return b(a,x.all)}function k(a){return b(a,x.settle)}function l(a,c){return b(a,function(a){return x.map(a,c)})}function m(a,c){return b(a,function(a){return x.filter(a,c)})}var n=a("./lib/decorators/timed"),o=a("./lib/decorators/array"),p=a("./lib/decorators/flow"),q=a("./lib/decorators/fold"),r=a("./lib/decorators/inspect"),s=a("./lib/decorators/iterate"),t=a("./lib/decorators/progress"),u=a("./lib/decorators/with"),v=a("./lib/decorators/unhandledRejection"),w=a("./lib/TimeoutError"),x=[o,p,q,s,t,r,u,n,v].reduce(function(a,b){return b(a)},a("./lib/Promise")),y=a("./lib/apply")(x);return b.promise=c,b.resolve=x.resolve,b.reject=x.reject,b.lift=d,b["try"]=e,b.attempt=e,b.iterate=x.iterate,b.unfold=x.unfold,b.join=i,b.all=j,b.settle=k,b.any=d(x.any),b.some=d(x.some),b.race=d(x.race),b.map=l,b.filter=m,b.reduce=d(x.reduce),b.reduceRight=d(x.reduceRight),b.isPromiseLike=h,b.Promise=x,b.defer=f,b.TimeoutError=w,b})}("function"==typeof define&&define.amd?define:function(c){b.exports=c(a)})},{"./lib/Promise":45,"./lib/TimeoutError":47,"./lib/apply":48,"./lib/decorators/array":49,"./lib/decorators/flow":50,"./lib/decorators/fold":51,"./lib/decorators/inspect":52,"./lib/decorators/iterate":53,"./lib/decorators/progress":54,"./lib/decorators/timed":55,"./lib/decorators/unhandledRejection":56,"./lib/decorators/with":57}]},{},[11]);